var ha=Object.defineProperty;var Ts=s=>{throw TypeError(s)};var ca=(s,e,t)=>e in s?ha(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var f=(s,e,t)=>ca(s,typeof e!="symbol"?e+"":e,t),Qt=(s,e,t)=>e.has(s)||Ts("Cannot "+t);var p=(s,e,t)=>(Qt(s,e,"read from private field"),t?t.call(s):e.get(s)),v=(s,e,t)=>e.has(s)?Ts("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),k=(s,e,t,i)=>(Qt(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),b=(s,e,t)=>(Qt(s,e,"access private method"),t);import{c as wt,g as Ge}from"./jquery-uoon-iQo.js";import{r as Vn}from"./image-picker-BNqc1Sk_.js";function pa(s,e,t){const i=[];return s.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((r,a,o)=>{r!==""&&i.push(r),a<o.length-1&&i.push(t)})),i}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function Ps(s,e){const t=/\$/g,i="$$$$";let n=[s];if(e==null)return n;for(const r of Object.keys(e))if(r!=="_"){let a=e[r];typeof a=="string"&&(a=t[Symbol.replace](a,i)),n=pa(n,new RegExp(`%\\{${r}\\}`,"g"),a)}return n}const fa=s=>{throw new Error(`missing string: ${s}`)};var lt,dt,xi;class Wn{constructor(e,{onMissingKey:t=fa}={}){v(this,dt);f(this,"locale");v(this,lt);this.locale={strings:{},pluralize(i){return i===1?0:1}},Array.isArray(e)?e.forEach(b(this,dt,xi),this):b(this,dt,xi).call(this,e),k(this,lt,t)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(p(this,lt).call(this,e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){const r=this.locale.pluralize(t.smart_count);return Ps(i[r],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return Ps(i,t)}}lt=new WeakMap,dt=new WeakSet,xi=function(e){if(!(e!=null&&e.strings))return;const t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})};class Gn{constructor(e,t){f(this,"uppy");f(this,"opts");f(this,"id");f(this,"defaultLocale");f(this,"i18n");f(this,"i18nArray");f(this,"type");f(this,"VERSION");this.uppy=e,this.opts=t??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new Wn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Zt(s){return s<10?`0${s}`:s.toString()}function It(){const s=new Date,e=Zt(s.getHours()),t=Zt(s.getMinutes()),i=Zt(s.getSeconds());return`${e}:${t}:${i}`}const ma={debug:()=>{},warn:()=>{},error:(...s)=>console.error(`[Uppy] [${It()}]`,...s)},ga={debug:(...s)=>console.debug(`[Uppy] [${It()}]`,...s),warn:(...s)=>console.warn(`[Uppy] [${It()}]`,...s),error:(...s)=>console.error(`[Uppy] [${It()}]`,...s)};function Kn(s){return typeof s!="object"||s===null||!("nodeType"in s)?!1:s.nodeType===Node.ELEMENT_NODE}function ya(s,e=document){return typeof s=="string"?e.querySelector(s):Kn(s)?s:null}function Xn(s){for(;s&&!s.dir;)s=s.parentNode;return s==null?void 0:s.dir}var bt,C,Yn,_e,Cs,Jn,Qn,Zn,ns,Ii,Ri,st={},er=[],ba=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vt=Array.isArray;function le(s,e){for(var t in e)s[t]=e[t];return s}function rs(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function nt(s,e,t){var i,n,r,a={};for(r in e)r=="key"?i=e[r]:r=="ref"?n=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?bt.call(arguments,2):t),typeof s=="function"&&s.defaultProps!=null)for(r in s.defaultProps)a[r]===void 0&&(a[r]=s.defaultProps[r]);return tt(s,a,i,n,null)}function tt(s,e,t,i,n){var r={type:s,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++Yn,__i:-1,__u:0};return n==null&&C.vnode!=null&&C.vnode(r),r}function va(){return{current:null}}function ee(s){return s.children}function W(s,e){this.props=s,this.context=e}function Ve(s,e){if(e==null)return s.__?Ve(s.__,s.__i+1):null;for(var t;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null)return t.__e;return typeof s.type=="function"?Ve(s):null}function tr(s){var e,t;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,e=0;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null){s.__e=s.__c.base=t.__e;break}return tr(s)}}function Es(s){(!s.__d&&(s.__d=!0)&&_e.push(s)&&!Bt.__r++||Cs!=C.debounceRendering)&&((Cs=C.debounceRendering)||Jn)(Bt)}function Bt(){for(var s,e,t,i,n,r,a,o=1;_e.length;)_e.length>o&&_e.sort(Qn),s=_e.shift(),o=_e.length,s.__d&&(t=void 0,i=void 0,n=(i=(e=s).__v).__e,r=[],a=[],e.__P&&((t=le({},i)).__v=i.__v+1,C.vnode&&C.vnode(t),as(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[n]:null,r,n??Ve(i),!!(32&i.__u),a),t.__v=i.__v,t.__.__k[t.__i]=t,nr(r,t,a),i.__e=i.__=null,t.__e!=n&&tr(t)));Bt.__r=0}function ir(s,e,t,i,n,r,a,o,l,u,c){var h,m,g,y,F,T,S,_=i&&i.__k||er,A=e.length;for(l=_a(t,e,_,l,A),h=0;h<A;h++)(g=t.__k[h])!=null&&(m=g.__i==-1?st:_[g.__i]||st,g.__i=h,T=as(s,g,m,n,r,a,o,l,u,c),y=g.__e,g.ref&&m.ref!=g.ref&&(m.ref&&os(m.ref,null,g),c.push(g.ref,g.__c||y,g)),F==null&&y!=null&&(F=y),(S=!!(4&g.__u))||m.__k===g.__k?l=sr(g,l,s,S):typeof g.type=="function"&&T!==void 0?l=T:y&&(l=y.nextSibling),g.__u&=-7);return t.__e=F,l}function _a(s,e,t,i,n){var r,a,o,l,u,c=t.length,h=c,m=0;for(s.__k=new Array(n),r=0;r<n;r++)(a=e[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=s.__k[r]=tt(null,a,null,null,null):vt(a)?a=s.__k[r]=tt(ee,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=s.__k[r]=tt(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):s.__k[r]=a,l=r+m,a.__=s,a.__b=s.__b+1,o=null,(u=a.__i=wa(a,t,l,h))!=-1&&(h--,(o=t[u])&&(o.__u|=2)),o==null||o.__v==null?(u==-1&&(n>c?m--:n<c&&m++),typeof a.type!="function"&&(a.__u|=4)):u!=l&&(u==l-1?m--:u==l+1?m++:(u>l?m--:m++,a.__u|=4))):s.__k[r]=null;if(h)for(r=0;r<c;r++)(o=t[r])!=null&&(2&o.__u)==0&&(o.__e==i&&(i=Ve(o)),ar(o,o));return i}function sr(s,e,t,i){var n,r;if(typeof s.type=="function"){for(n=s.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=s,e=sr(n[r],e,t,i));return e}s.__e!=e&&(i&&(e&&s.type&&!e.parentNode&&(e=Ve(s)),t.insertBefore(s.__e,e||null)),e=s.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Q(s,e){return e=e||[],s==null||typeof s=="boolean"||(vt(s)?s.some(function(t){Q(t,e)}):e.push(s)),e}function wa(s,e,t,i){var n,r,a,o=s.key,l=s.type,u=e[t],c=u!=null&&(2&u.__u)==0;if(u===null&&o==null||c&&o==u.key&&l==u.type)return t;if(i>(c?1:0)){for(n=t-1,r=t+1;n>=0||r<e.length;)if((u=e[a=n>=0?n--:r++])!=null&&(2&u.__u)==0&&o==u.key&&l==u.type)return a}return-1}function ks(s,e,t){e[0]=="-"?s.setProperty(e,t??""):s[e]=t==null?"":typeof t!="number"||ba.test(e)?t:t+"px"}function Ft(s,e,t,i,n){var r,a;e:if(e=="style")if(typeof t=="string")s.style.cssText=t;else{if(typeof i=="string"&&(s.style.cssText=i=""),i)for(e in i)t&&e in t||ks(s.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||ks(s.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Zn,"$1")),a=e.toLowerCase(),e=a in s||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),s.l||(s.l={}),s.l[e+r]=t,t?i?t.u=i.u:(t.u=ns,s.addEventListener(e,r?Ri:Ii,r)):s.removeEventListener(e,r?Ri:Ii,r);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in s)try{s[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?s.removeAttribute(e):s.setAttribute(e,e=="popover"&&t==1?"":t))}}function As(s){return function(e){if(this.l){var t=this.l[e.type+s];if(e.t==null)e.t=ns++;else if(e.t<t.u)return;return t(C.event?C.event(e):e)}}}function as(s,e,t,i,n,r,a,o,l,u){var c,h,m,g,y,F,T,S,_,A,O,P,N,E,z,H,G,R=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),r=[o=e.__e=t.__e]),(c=C.__b)&&c(e);e:if(typeof R=="function")try{if(S=e.props,_="prototype"in R&&R.prototype.render,A=(c=R.contextType)&&i[c.__c],O=c?A?A.props.value:c.__:i,t.__c?T=(h=e.__c=t.__c).__=h.__E:(_?e.__c=h=new R(S,O):(e.__c=h=new W(S,O),h.constructor=R,h.render=Sa),A&&A.sub(h),h.state||(h.state={}),h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),_&&h.__s==null&&(h.__s=h.state),_&&R.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=le({},h.__s)),le(h.__s,R.getDerivedStateFromProps(S,h.__s))),g=h.props,y=h.state,h.__v=e,m)_&&R.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),_&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(_&&R.getDerivedStateFromProps==null&&S!==g&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(S,O),e.__v==t.__v||!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(S,h.__s,O)===!1){for(e.__v!=t.__v&&(h.props=S,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(V){V&&(V.__=e)}),P=0;P<h._sb.length;P++)h.__h.push(h._sb[P]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(S,h.__s,O),_&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(g,y,F)})}if(h.context=O,h.props=S,h.__P=s,h.__e=!1,N=C.__r,E=0,_){for(h.state=h.__s,h.__d=!1,N&&N(e),c=h.render(h.props,h.state,h.context),z=0;z<h._sb.length;z++)h.__h.push(h._sb[z]);h._sb=[]}else do h.__d=!1,N&&N(e),c=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++E<25);h.state=h.__s,h.getChildContext!=null&&(i=le(le({},i),h.getChildContext())),_&&!m&&h.getSnapshotBeforeUpdate!=null&&(F=h.getSnapshotBeforeUpdate(g,y)),H=c,c!=null&&c.type===ee&&c.key==null&&(H=rr(c.props.children)),o=ir(s,vt(H)?H:[H],e,t,i,n,r,a,o,l,u),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),T&&(h.__E=h.__=null)}catch(V){if(e.__v=null,l||r!=null)if(V.then){for(e.__u|=l?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;r[r.indexOf(o)]=null,e.__e=o}else{for(G=r.length;G--;)rs(r[G]);Mi(e)}else e.__e=t.__e,e.__k=t.__k,V.then||Mi(e);C.__e(V,e,t)}else r==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=Fa(t.__e,e,t,i,n,r,a,l,u);return(c=C.diffed)&&c(e),128&e.__u?void 0:o}function Mi(s){s&&s.__c&&(s.__c.__e=!0),s&&s.__k&&s.__k.forEach(Mi)}function nr(s,e,t){for(var i=0;i<t.length;i++)os(t[i],t[++i],t[++i]);C.__c&&C.__c(e,s),s.some(function(n){try{s=n.__h,n.__h=[],s.some(function(r){r.call(n)})}catch(r){C.__e(r,n.__v)}})}function rr(s){return typeof s!="object"||s==null||s.__b&&s.__b>0?s:vt(s)?s.map(rr):le({},s)}function Fa(s,e,t,i,n,r,a,o,l){var u,c,h,m,g,y,F,T=t.props||st,S=e.props,_=e.type;if(_=="svg"?n="http://www.w3.org/2000/svg":_=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),r!=null){for(u=0;u<r.length;u++)if((g=r[u])&&"setAttribute"in g==!!_&&(_?g.localName==_:g.nodeType==3)){s=g,r[u]=null;break}}if(s==null){if(_==null)return document.createTextNode(S);s=document.createElementNS(n,_,S.is&&S),o&&(C.__m&&C.__m(e,r),o=!1),r=null}if(_==null)T===S||o&&s.data==S||(s.data=S);else{if(r=r&&bt.call(s.childNodes),!o&&r!=null)for(T={},u=0;u<s.attributes.length;u++)T[(g=s.attributes[u]).name]=g.value;for(u in T)if(g=T[u],u!="children"){if(u=="dangerouslySetInnerHTML")h=g;else if(!(u in S)){if(u=="value"&&"defaultValue"in S||u=="checked"&&"defaultChecked"in S)continue;Ft(s,u,null,g,n)}}for(u in S)g=S[u],u=="children"?m=g:u=="dangerouslySetInnerHTML"?c=g:u=="value"?y=g:u=="checked"?F=g:o&&typeof g!="function"||T[u]===g||Ft(s,u,g,T[u],n);if(c)o||h&&(c.__html==h.__html||c.__html==s.innerHTML)||(s.innerHTML=c.__html),e.__k=[];else if(h&&(s.innerHTML=""),ir(e.type=="template"?s.content:s,vt(m)?m:[m],e,t,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":n,r,a,r?r[0]:t.__k&&Ve(t,0),o,l),r!=null)for(u=r.length;u--;)rs(r[u]);o||(u="value",_=="progress"&&y==null?s.removeAttribute("value"):y!=null&&(y!==s[u]||_=="progress"&&!y||_=="option"&&y!=T[u])&&Ft(s,u,y,T[u],n),u="checked",F!=null&&F!=s[u]&&Ft(s,u,F,T[u],n))}return s}function os(s,e,t){try{if(typeof s=="function"){var i=typeof s.__u=="function";i&&s.__u(),i&&e==null||(s.__u=s(e))}else s.current=e}catch(n){C.__e(n,t)}}function ar(s,e,t){var i,n;if(C.unmount&&C.unmount(s),(i=s.ref)&&(i.current&&i.current!=s.__e||os(i,null,e)),(i=s.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){C.__e(r,e)}i.base=i.__P=null}if(i=s.__k)for(n=0;n<i.length;n++)i[n]&&ar(i[n],e,t||typeof s.type!="function");t||rs(s.__e),s.__c=s.__=s.__e=void 0}function Sa(s,e,t){return this.constructor(s,t)}function Ta(s,e,t){var i,n,r,a;e==document&&(e=document.documentElement),C.__&&C.__(s,e),n=(i=!1)?null:e.__k,r=[],a=[],as(e,s=e.__k=nt(ee,null,[s]),n||st,st,e.namespaceURI,n?null:e.firstChild?bt.call(e.childNodes):null,r,n?n.__e:e.firstChild,i,a),nr(r,s,a)}function or(s,e,t){var i,n,r,a,o=le({},s.props);for(r in s.type&&s.type.defaultProps&&(a=s.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?n=e[r]:o[r]=e[r]===void 0&&a!=null?a[r]:e[r];return arguments.length>2&&(o.children=arguments.length>3?bt.call(arguments,2):t),tt(s.type,o,i||s.key,n||s.ref,null)}bt=er.slice,C={__e:function(s,e,t,i){for(var n,r,a;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(s)),a=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(s,i||{}),a=n.__d),a)return n.__E=n}catch(o){s=o}throw s}},Yn=0,W.prototype.setState=function(s,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=le({},this.state),typeof s=="function"&&(s=s(le({},t),this.props)),s&&le(t,s),s!=null&&this.__v&&(e&&this._sb.push(e),Es(this))},W.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),Es(this))},W.prototype.render=ee,_e=[],Jn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qn=function(s,e){return s.__v.__b-e.__v.__b},Bt.__r=0,Zn=/(PointerCapture)$|Capture$/i,ns=0,Ii=As(!1),Ri=As(!0);var rt,I,ei,Os,at=0,lr=[],M=C,Us=M.__b,Ns=M.__r,xs=M.diffed,Is=M.__c,Rs=M.unmount,Ms=M.__;function ls(s,e){M.__h&&M.__h(I,s,at||e),at=0;var t=I.__H||(I.__H={__:[],__h:[]});return s>=t.__.length&&t.__.push({}),t.__[s]}function Lt(s){return at=1,Pa(ur,s)}function Pa(s,e,t){var i=ls(rt++,2);if(i.t=s,!i.__c&&(i.__=[t?t(e):ur(void 0,e),function(o){var l=i.__N?i.__N[0]:i.__[0],u=i.t(l,o);l!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=I,!I.__f)){var n=function(o,l,u){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(m){return!!m.__c});if(c.every(function(m){return!m.__N}))return!r||r.call(this,o,l,u);var h=i.__c.props!==o;return c.forEach(function(m){if(m.__N){var g=m.__[0];m.__=m.__N,m.__N=void 0,g!==m.__[0]&&(h=!0)}}),r&&r.call(this,o,l,u)||h};I.__f=!0;var r=I.shouldComponentUpdate,a=I.componentWillUpdate;I.componentWillUpdate=function(o,l,u){if(this.__e){var c=r;r=void 0,n(o,l,u),r=c}a&&a.call(this,o,l,u)},I.shouldComponentUpdate=n}return i.__N||i.__}function Di(s,e){var t=ls(rt++,3);!M.__s&&dr(t.__H,e)&&(t.__=s,t.u=e,I.__H.__h.push(t))}function Rt(s){return at=5,ds(function(){return{current:s}},[])}function ds(s,e){var t=ls(rt++,7);return dr(t.__H,e)&&(t.__=s(),t.__H=e,t.__h=s),t.__}function Ca(s,e){return at=8,ds(function(){return s},e)}function Ea(){for(var s;s=lr.shift();)if(s.__P&&s.__H)try{s.__H.__h.forEach(Mt),s.__H.__h.forEach(Bi),s.__H.__h=[]}catch(e){s.__H.__h=[],M.__e(e,s.__v)}}M.__b=function(s){I=null,Us&&Us(s)},M.__=function(s,e){s&&e.__k&&e.__k.__m&&(s.__m=e.__k.__m),Ms&&Ms(s,e)},M.__r=function(s){Ns&&Ns(s),rt=0;var e=(I=s.__c).__H;e&&(ei===I?(e.__h=[],I.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Mt),e.__h.forEach(Bi),e.__h=[],rt=0)),ei=I},M.diffed=function(s){xs&&xs(s);var e=s.__c;e&&e.__H&&(e.__H.__h.length&&(lr.push(e)!==1&&Os===M.requestAnimationFrame||((Os=M.requestAnimationFrame)||ka)(Ea)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ei=I=null},M.__c=function(s,e){e.some(function(t){try{t.__h.forEach(Mt),t.__h=t.__h.filter(function(i){return!i.__||Bi(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],M.__e(i,t.__v)}}),Is&&Is(s,e)},M.unmount=function(s){Rs&&Rs(s);var e,t=s.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Mt(i)}catch(n){e=n}}),t.__H=void 0,e&&M.__e(e,t.__v))};var Ds=typeof requestAnimationFrame=="function";function ka(s){var e,t=function(){clearTimeout(i),Ds&&cancelAnimationFrame(e),setTimeout(s)},i=setTimeout(t,35);Ds&&(e=requestAnimationFrame(t))}function Mt(s){var e=I,t=s.__c;typeof t=="function"&&(s.__c=void 0,t()),I=e}function Bi(s){var e=I;s.__c=s.__(),I=e}function dr(s,e){return!s||s.length!==e.length||e.some(function(t,i){return t!==s[i]})}function ur(s,e){return typeof e=="function"?e(s):e}function Aa(s,e){for(var t in e)s[t]=e[t];return s}function Bs(s,e){for(var t in s)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&s[i]!==e[i])return!0;return!1}function Ls(s,e){this.props=s,this.context=e}(Ls.prototype=new W).isPureReactComponent=!0,Ls.prototype.shouldComponentUpdate=function(s,e){return Bs(this.props,s)||Bs(this.state,e)};var $s=C.__b;C.__b=function(s){s.type&&s.type.__f&&s.ref&&(s.props.ref=s.ref,s.ref=null),$s&&$s(s)};var Oa=C.__e;C.__e=function(s,e,t,i){if(s.then){for(var n,r=e;r=r.__;)if((n=r.__c)&&n.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),n.__c(s,e)}Oa(s,e,t,i)};var zs=C.unmount;function hr(s,e,t){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),s.__c.__H=null),(s=Aa({},s)).__c!=null&&(s.__c.__P===t&&(s.__c.__P=e),s.__c.__e=!0,s.__c=null),s.__k=s.__k&&s.__k.map(function(i){return hr(i,e,t)})),s}function cr(s,e,t){return s&&t&&(s.__v=null,s.__k=s.__k&&s.__k.map(function(i){return cr(i,e,t)}),s.__c&&s.__c.__P===e&&(s.__e&&t.appendChild(s.__e),s.__c.__e=!0,s.__c.__P=t)),s}function ti(){this.__u=0,this.o=null,this.__b=null}function pr(s){var e=s.__.__c;return e&&e.__a&&e.__a(s)}function St(){this.i=null,this.l=null}C.unmount=function(s){var e=s.__c;e&&e.__R&&e.__R(),e&&32&s.__u&&(s.type=null),zs&&zs(s)},(ti.prototype=new W).__c=function(s,e){var t=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(t);var n=pr(i.__v),r=!1,a=function(){r||(r=!0,t.__R=null,n?n(o):o())};t.__R=a;var o=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=cr(l,l.__c.__P,l.__c.__O)}var u;for(i.setState({__a:i.__b=null});u=i.o.pop();)u.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),s.then(a,a)},ti.prototype.componentWillUnmount=function(){this.o=[]},ti.prototype.render=function(s,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=hr(this.__b,t,i.__O=i.__P)}this.__b=null}var n=e.__a&&nt(ee,null,s.fallback);return n&&(n.__u&=-33),[nt(ee,null,e.__a?null:s.children),n]};var qs=function(s,e,t){if(++t[1]===t[0]&&s.l.delete(e),s.props.revealOrder&&(s.props.revealOrder[0]!=="t"||!s.l.size))for(t=s.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;s.i=t=t[2]}};(St.prototype=new W).__a=function(s){var e=this,t=pr(e.__v),i=e.l.get(s);return i[0]++,function(n){var r=function(){e.props.revealOrder?(i.push(n),qs(e,s,i)):n()};t?t(r):r()}},St.prototype.render=function(s){this.i=null,this.l=new Map;var e=Q(s.children);s.revealOrder&&s.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return s.children},St.prototype.componentDidUpdate=St.prototype.componentDidMount=function(){var s=this;this.l.forEach(function(e,t){qs(s,t,e)})};var Ua=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Na=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xa=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ia=/[A-Z0-9]/g,Ra=typeof document<"u",Ma=function(s){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(s)};function js(s,e,t){return e.__k==null&&(e.textContent=""),Ta(s,e),typeof t=="function"&&t(),s?s.__c:null}W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(s){Object.defineProperty(W.prototype,s,{configurable:!0,get:function(){return this["UNSAFE_"+s]},set:function(e){Object.defineProperty(this,s,{configurable:!0,writable:!0,value:e})}})});var Hs=C.event;function Da(){}function Ba(){return this.cancelBubble}function La(){return this.defaultPrevented}C.event=function(s){return Hs&&(s=Hs(s)),s.persist=Da,s.isPropagationStopped=Ba,s.isDefaultPrevented=La,s.nativeEvent=s};var $a={enumerable:!1,configurable:!0,get:function(){return this.class}},Vs=C.vnode;C.vnode=function(s){typeof s.type=="string"&&(function(e){var t=e.props,i=e.type,n={},r=i.indexOf("-")===-1;for(var a in t){var o=t[a];if(!(a==="value"&&"defaultValue"in t&&o==null||Ra&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&o===!0?o="":l==="translate"&&o==="no"?o=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||Ma(t.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":xa.test(a)&&(a=l):l=a="oninput":r&&Na.test(a)?a=a.replace(Ia,"-$&").toLowerCase():o===null&&(o=void 0),l==="oninput"&&n[a=l]&&(a="oninputCapture"),n[a]=o}}i=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=Q(t.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),i=="select"&&n.defaultValue!=null&&(n.value=Q(t.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",$a)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),e.props=n})(s),s.$$typeof=Ua,Vs&&Vs(s)};var Ws=C.__r;C.__r=function(s){Ws&&Ws(s),s.__c};var Gs=C.diffed;C.diffed=function(s){Gs&&Gs(s);var e=s.props,t=s.__e;t!=null&&s.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function za(s){let e=null,t;return(...i)=>(t=i,e||(e=Promise.resolve().then(()=>(e=null,s(...t)))),e)}var ut;const zt=class zt extends Gn{constructor(){super(...arguments);v(this,ut);f(this,"isTargetDOMEl");f(this,"el");f(this,"parent");f(this,"title")}getTargetPlugin(t){let i;if(typeof(t==null?void 0:t.addTarget)=="function")i=t,i instanceof zt||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:i,UIPlugin:zt}}));else if(typeof t=="function"){const n=t;this.uppy.iteratePlugins(r=>{r instanceof n&&(i=r)})}return i}mount(t,i){const n=i.id,r=ya(t);if(r){this.isTargetDOMEl=!0;const l=document.createElement("div");return l.classList.add("uppy-Root"),k(this,ut,za(u=>{this.uppy.getPlugin(this.id)&&(js(this.render(u,l),l),this.afterUpdate())})),this.uppy.log(`Installing ${n} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),js(this.render(this.uppy.getState(),l),l),this.el=l,r.appendChild(l),l.dir=this.opts.direction||Xn(l)||"ltr",this.onMount(),this.el}const a=this.getTargetPlugin(t);if(a)return this.uppy.log(`Installing ${n} to ${a.id}`),this.parent=a,this.el=a.addTarget(i),this.onMount(),this.el;this.uppy.log(`Not installing ${n}`);let o=`Invalid target option given to ${n}.`;throw typeof t=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(t,i){throw new Error("Extend the render method to add your plugin to a DOM element")}update(t){var i;this.el!=null&&((i=p(this,ut))==null||i.call(this,t))}unmount(){var t;this.isTargetDOMEl&&((t=this.el)==null||t.remove()),this.onUnmount()}onMount(){}onUnmount(){}};ut=new WeakMap;let We=zt;const qa="4.3.2",ja={version:qa};var xe,qt,mr;class fr{constructor(){v(this,qt);f(this,"state",{});v(this,xe,new Set)}getState(){return this.state}setState(e){const t={...this.state},i={...this.state,...e};this.state=i,b(this,qt,mr).call(this,t,i,e)}subscribe(e){return p(this,xe).add(e),()=>{p(this,xe).delete(e)}}}xe=new WeakMap,qt=new WeakSet,mr=function(...e){p(this,xe).forEach(t=>{t(...e)})},f(fr,"VERSION",ja.version);function gr(s){const e=s.lastIndexOf(".");return e===-1||e===s.length-1?{name:s,extension:void 0}:{name:s.slice(0,e),extension:s.slice(e+1)}}const Ks={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function yr(s){var t;if(s.type)return s.type;const e=s.name?(t=gr(s.name).extension)==null?void 0:t.toLowerCase():null;return e&&e in Ks?Ks[e]:"application/octet-stream"}function Ha(s){return s.charCodeAt(0).toString(32)}function Xs(s){let e="";return s.replace(/[^A-Z0-9]/gi,t=>(e+=`-${Ha(t)}`,"/"))+e}function Va(s,e){let t=e||"uppy";return typeof s.name=="string"&&(t+=`-${Xs(s.name.toLowerCase())}`),s.type!==void 0&&(t+=`-${s.type}`),s.meta&&typeof s.meta.relativePath=="string"&&(t+=`-${Xs(s.meta.relativePath.toLowerCase())}`),s.data.size!==void 0&&(t+=`-${s.data.size}`),s.data.lastModified!==void 0&&(t+=`-${s.data.lastModified}`),t}function Wa(s){return!s.isRemote||!s.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(s.remote.provider)}function Ga(s,e){if(Wa(s))return s.id;const t=yr(s);return Va({...s,type:t},e)}var ii,Ys;function us(){if(Ys)return ii;Ys=1;function s(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return ii=s,ii}var si,Js;function Ka(){if(Js)return si;Js=1;var s=typeof wt=="object"&&wt&&wt.Object===Object&&wt;return si=s,si}var ni,Qs;function br(){if(Qs)return ni;Qs=1;var s=Ka(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=s||e||Function("return this")();return ni=t,ni}var ri,Zs;function Xa(){if(Zs)return ri;Zs=1;var s=br(),e=function(){return s.Date.now()};return ri=e,ri}var ai,en;function Ya(){if(en)return ai;en=1;var s=/\s/;function e(t){for(var i=t.length;i--&&s.test(t.charAt(i)););return i}return ai=e,ai}var oi,tn;function Ja(){if(tn)return oi;tn=1;var s=Ya(),e=/^\s+/;function t(i){return i&&i.slice(0,s(i)+1).replace(e,"")}return oi=t,oi}var li,sn;function vr(){if(sn)return li;sn=1;var s=br(),e=s.Symbol;return li=e,li}var di,nn;function Qa(){if(nn)return di;nn=1;var s=vr(),e=Object.prototype,t=e.hasOwnProperty,i=e.toString,n=s?s.toStringTag:void 0;function r(a){var o=t.call(a,n),l=a[n];try{a[n]=void 0;var u=!0}catch{}var c=i.call(a);return u&&(o?a[n]=l:delete a[n]),c}return di=r,di}var ui,rn;function Za(){if(rn)return ui;rn=1;var s=Object.prototype,e=s.toString;function t(i){return e.call(i)}return ui=t,ui}var hi,an;function eo(){if(an)return hi;an=1;var s=vr(),e=Qa(),t=Za(),i="[object Null]",n="[object Undefined]",r=s?s.toStringTag:void 0;function a(o){return o==null?o===void 0?n:i:r&&r in Object(o)?e(o):t(o)}return hi=a,hi}var ci,on;function to(){if(on)return ci;on=1;function s(e){return e!=null&&typeof e=="object"}return ci=s,ci}var pi,ln;function io(){if(ln)return pi;ln=1;var s=eo(),e=to(),t="[object Symbol]";function i(n){return typeof n=="symbol"||e(n)&&s(n)==t}return pi=i,pi}var fi,dn;function so(){if(dn)return fi;dn=1;var s=Ja(),e=us(),t=io(),i=NaN,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(t(u))return i;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=s(u);var h=r.test(u);return h||a.test(u)?o(u.slice(2),h?2:8):n.test(u)?i:+u}return fi=l,fi}var mi,un;function _r(){if(un)return mi;un=1;var s=us(),e=Xa(),t=so(),i="Expected a function",n=Math.max,r=Math.min;function a(o,l,u){var c,h,m,g,y,F,T=0,S=!1,_=!1,A=!0;if(typeof o!="function")throw new TypeError(i);l=t(l)||0,s(u)&&(S=!!u.leading,_="maxWait"in u,m=_?n(t(u.maxWait)||0,l):m,A="trailing"in u?!!u.trailing:A);function O(x){var ie=c,fe=h;return c=h=void 0,T=x,g=o.apply(fe,ie),g}function P(x){return T=x,y=setTimeout(z,l),S?O(x):g}function N(x){var ie=x-F,fe=x-T,Oe=l-ie;return _?r(Oe,m-fe):Oe}function E(x){var ie=x-F,fe=x-T;return F===void 0||ie>=l||ie<0||_&&fe>=m}function z(){var x=e();if(E(x))return H(x);y=setTimeout(z,N(x))}function H(x){return y=void 0,A&&c?O(x):(c=h=void 0,g)}function G(){y!==void 0&&clearTimeout(y),T=0,c=F=h=y=void 0}function R(){return y===void 0?g:H(e())}function V(){var x=e(),ie=E(x);if(c=arguments,h=this,F=x,ie){if(y===void 0)return P(F);if(_)return clearTimeout(y),y=setTimeout(z,l),O(F)}return y===void 0&&(y=setTimeout(z,l)),g}return V.cancel=G,V.flush=R,V}return mi=a,mi}var gi,hn;function no(){if(hn)return gi;hn=1;var s=_r(),e=us(),t="Expected a function";function i(n,r,a){var o=!0,l=!0;if(typeof n!="function")throw new TypeError(t);return e(a)&&(o="leading"in a?!!a.leading:o,l="trailing"in a?!!a.trailing:l),s(n,r,{leading:o,maxWait:r,trailing:l})}return gi=i,gi}var ro=no();const ao=Ge(ro);var yi,cn;function oo(){return cn||(cn=1,yi=function(){var e={},t=e._fns={};e.emit=function(a,o,l,u,c,h,m){var g=i(a);g.length&&n(a,g,[o,l,u,c,h,m])},e.on=function(a,o){t[a]||(t[a]=[]),t[a].push(o)},e.once=function(a,o){function l(){o.apply(this,arguments),e.off(a,l)}this.on(a,l)},e.off=function(a,o){var l=[];if(a&&o){var u=this._fns[a],c=0,h=u?u.length:0;for(c;c<h;c++)u[c]!==o&&l.push(u[c])}l.length?this._fns[a]=l:delete this._fns[a]};function i(r){var a=t[r]?t[r]:[],o=r.indexOf(":"),l=o===-1?[r]:[r.substring(0,o),r.substring(o+1)],u=Object.keys(t),c=0,h=u.length;for(c;c<h;c++){var m=u[c];if(m==="*"&&(a=a.concat(t[m])),l.length===2&&l[0]===m){a=a.concat(t[m]);break}}return a}function n(r,a,o){var l=0,u=a.length;for(l;l<u&&a[l];l++)a[l].event=r,a[l].apply(a[l],o)}return e}),yi}var lo=oo();const uo=Ge(lo);let ho="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",hs=(s=21)=>{let e="",t=s|0;for(;t--;)e+=ho[Math.random()*64|0];return e};const co="4.5.3",po={version:co};function fo(s,e){return e.name?e.name:s.split("/")[0]==="image"?`${s.split("/")[0]}.${s.split("/")[1]}`:"noname"}const mo={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var bi,pn;function go(){return pn||(pn=1,bi=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0;let i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";const n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(i)/Math.log(1024)),n.length-1),a=Number(i/1024**r),o=n[r];return`${a>=10||a%1===0?Math.round(a):a.toFixed(1)} ${o}`}),bi}var yo=go();const we=Ge(yo);var vi,fn;function bo(){if(fn)return vi;fn=1;function s(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}return s.prototype.match=function(e){var t=!0,i=this.parts,n,r=i.length,a;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(a=(e||"").split(this.separator),n=0;t&&n<r;n++)i[n]!=="*"&&(n<a.length?t=i[n]===a[n]:t=!1);t=t&&a}else if(typeof e.splice=="function")for(t=[],n=e.length;n--;)this.match(e[n])&&(t[t.length]=e[n]);else if(typeof e=="object"){t={};for(var o in e)this.match(o)&&(t[o]=e[o])}return t},vi=function(e,t,i){var n=new s(e,i||/[\/\.]/);return typeof t<"u"?n.match(t):n},vi}var _i,mn;function vo(){if(mn)return _i;mn=1;var s=bo(),e=/[\/\+\.]/;return _i=function(t,i){function n(r){var a=s(r,t,e);return a&&a.length>=2}return i?n(i.split(";")[0]):n},_i}var _o=vo();const wo=Ge(_o),Fo={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Y extends Error{constructor(t,i){super(t);f(this,"isUserFacing");f(this,"file");f(this,"isRestriction",!0);this.isUserFacing=(i==null?void 0:i.isUserFacing)??!0,i!=null&&i.file&&(this.file=i.file)}}class So{constructor(e,t){f(this,"getI18n");f(this,"getOpts");this.getI18n=t,this.getOpts=()=>{var n;const i=e();if(((n=i.restrictions)==null?void 0:n.allowedFileTypes)!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(a=>!a.isGhost).length+t.length>n)throw new Y(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(i){const r=[...e,...t].reduce((a,o)=>a+(o.size??0),0);if(r>i)throw new Y(this.getI18n()("aggregateExceedsSize",{sizeAllowed:we(i),size:we(r)}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?wo(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){const a=n.join(", ");throw new Y(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new Y(this.getI18n()("exceedsSize",{size:we(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(i&&e.size!=null&&e.size<i)throw new Y(this.getI18n()("inferiorSize",{size:we(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Y(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new Y(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:i}=this.getOpts().restrictions,n=[];for(const r of i)(!Object.hasOwn(e.meta,r)||e.meta[r]==="")&&n.push(r);return{missingFields:n,error:t}}}function To(s){if(s==null&&typeof navigator<"u"&&(s=navigator.userAgent),!s)return!0;const e=/Edge\/(\d+\.\d+)/.exec(s);if(!e)return!0;const i=e[1].split(".",2),n=parseInt(i[0],10),r=parseInt(i[1],10);return n<15||n===15&&r<15063||n>18||n===18&&r>=18218}const Tt={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var K,X,ht,Fe,Ie,Re,Se,w,ve,$i,wr,zi,Fr,qi,ji,Hi,Vi,jt,Wi,Te,Sr,Tr,me,ct,Ye,Pr,Dt,Je;const Ht=class Ht{constructor(e){v(this,w);v(this,K,Object.create(null));v(this,X);v(this,ht);v(this,Fe,uo());v(this,Ie,new Set);v(this,Re,new Set);v(this,Se,new Set);f(this,"defaultLocale");f(this,"locale");f(this,"opts");f(this,"store");f(this,"i18n");f(this,"i18nArray");f(this,"scheduledAutoProceed",null);f(this,"wasOffline",!1);v(this,jt,(e,t)=>{const i=e?this.getFile(e.id):void 0;if(e==null||!i){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}if(i.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}const n={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};i.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...i.progress,...n,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...i.progress,...n}}),p(this,Te).call(this)});v(this,Te,ao(()=>b(this,w,Wi).call(this),500,{leading:!0,trailing:!0}));v(this,me,this.updateOnlineStatus.bind(this));v(this,ct,new Map);this.defaultLocale=mo;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Fo,meta:{},onBeforeFileAdded:(n,r)=>!Object.hasOwn(r,n.id),onBeforeUpload:n=>n,store:new fr,logger:ma,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e==null?void 0:e.restrictions}},e!=null&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e!=null&&e.debug&&(this.opts.logger=ga),this.log(`Using Core v${Ht.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Tt,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:To(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),k(this,X,new So(()=>this.opts,()=>this.i18n)),k(this,ht,this.store.subscribe((n,r,a)=>{this.emit("state-update",n,r,a),this.updateAll(r)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),b(this,w,Tr).call(this)}emit(e,...t){p(this,Fe).emit(e,...t)}on(e,t){return p(this,Fe).on(e,t),this}once(e,t){return p(this,Fe).once(e,t),this}off(e,t){return p(this,Fe).off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([i,n])=>[i,{...t[i],...n}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new Wn([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i=Object.create(null);Object.keys(t).forEach(n=>{i[n]={...t[n],progress:{...t[n].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,...Tt})}clear(){const{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Tt,files:{}})}addPreProcessor(e){p(this,Ie).add(e)}removePreProcessor(e){return p(this,Ie).delete(e)}addPostProcessor(e){p(this,Se).add(e)}removePostProcessor(e){return p(this,Se).delete(e)}addUploader(e){p(this,Re).add(e)}removeUploader(e){return p(this,Re).delete(e)}setMeta(e){const t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(n=>{i[n]={...i[n],meta:{...i[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){const i={...this.getState().files};if(!i[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const n={...i[e].meta,...t};i[e]={...i[e],meta:n},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:i}=this.getState(),n=Object.values(e),r=[],a=[],o=[],l=[],u=[],c=[],h=[],m=[],g=[];for(const y of n){const{progress:F}=y;!F.uploadComplete&&F.uploadStarted&&(r.push(y),y.isPaused||m.push(y)),F.uploadStarted||a.push(y),(F.uploadStarted||F.preprocess||F.postprocess)&&o.push(y),F.uploadStarted&&l.push(y),y.isPaused&&u.push(y),F.uploadComplete&&c.push(y),y.error&&h.push(y),(F.preprocess||F.postprocess)&&g.push(y)}return{newFiles:a,startedFiles:o,uploadStartedFiles:l,pausedFiles:u,completeFiles:c,erroredFiles:h,inProgressFiles:r,inProgressNotPausedFiles:m,processingFiles:g,isUploadStarted:l.length>0,isAllComplete:t===100&&c.length===n.length&&g.length===0,isAllErrored:!!i&&h.length===n.length,isAllPaused:r.length!==0&&u.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:n.some(y=>y.isGhost)}}validateRestrictions(e,t=this.getFiles()){try{p(this,X).validate(t,[e])}catch(i){return i}return null}validateSingleFile(e){try{p(this,X).validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){const t=this.getFiles();try{p(this,X).validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){b(this,w,zi).call(this,e);const{nextFilesState:t,validFilesToAdd:i,errors:n}=b(this,w,ji).call(this,[e]),r=n.filter(o=>o.isRestriction);if(b(this,w,ve).call(this,r),n.length>0)throw n[0];this.setState({files:t});const[a]=i;return this.emit("file-added",a),this.emit("files-added",i),this.log(`Added file: ${a.name}, ${a.id}, mime type: ${a.type}`),b(this,w,qi).call(this),a.id}addFiles(e){b(this,w,zi).call(this);const{nextFilesState:t,validFilesToAdd:i,errors:n}=b(this,w,ji).call(this,e),r=n.filter(o=>o.isRestriction);b(this,w,ve).call(this,r);const a=n.filter(o=>!o.isRestriction);if(a.length>0){let o=`Multiple errors occurred while adding files:
`;if(a.forEach(l=>{o+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:a.length}),details:o},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(a,o);{const l=new Error(o);throw l.errors=a,l}}this.setState({files:t}),i.forEach(o=>{this.emit("file-added",o)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(o=>{this.log(`Added file: ${o.name}
 id: ${o.id}
 type: ${o.type}`)}),i.length>0&&b(this,w,qi).call(this)}removeFiles(e){const{files:t,currentUploads:i}=this.getState(),n={...t},r={...i},a=Object.create(null);e.forEach(c=>{t[c]&&(a[c]=t[c],delete n[c])});function o(c){return a[c]===void 0}Object.keys(r).forEach(c=>{const h=i[c].fileIDs.filter(o);if(h.length===0){delete r[c];return}const{capabilities:m}=this.getState();if(h.length!==i[c].fileIDs.length&&!m.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");r[c]={...i[c],fileIDs:h}});const l={currentUploads:r,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),p(this,Te).call(this);const u=Object.keys(a);u.forEach(c=>{this.emit("file-removed",a[c])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const n={...e[i],isPaused:!0};e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const n={...e[i],isPaused:!1,error:null};e[i]=n}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await b(this,w,Vi).call(this);return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Tt)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const t=b(this,w,Ye).call(this,[e],{forceAllowNewUpload:!0});return b(this,w,Je).call(this,t)}logout(){this.iteratePlugins(e=>{var t,i;(i=(t=e.provider)==null?void 0:t.logout)==null||i.call(t)})}[Symbol.for("uppy test: updateTotalProgress")](){return b(this,w,Wi).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){const a=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(a)}const i=new e(this,...t),n=i.id;if(!n)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(n);if(r){const a=`Already found a plugin named '${r.id}'. Tried to use: '${n}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(a)}return e.VERSION&&this.log(`Using ${n} v${e.VERSION}`),i.type in p(this,K)?p(this,K)[i.type].push(i):p(this,K)[i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(const t of Object.values(p(this,K))){const i=t.find(n=>n.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return p(this,K)[e]}iteratePlugins(e){Object.values(p(this,K)).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=p(this,K)[e.type],i=t.findIndex(a=>a.id===e.id);i!==-1&&t.splice(i,1);const r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),p(this,ht).call(this),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",p(this,me)),window.removeEventListener("offline",p(this,me)))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",i=3e3){const n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){const{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){p(this,ct).set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const t=p(this,ct).get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?b(this,w,Je).call(this,e):(b(this,w,Dt).call(this,e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...e){return b(this,w,Ye).call(this,...e)}addResultData(e,t){if(!b(this,w,Pr).call(this,e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:i}=this.getState(),n={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:n}})}async upload(){var n;(n=p(this,K).uploader)!=null&&n.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(b(this,w,Hi).call(this).length>0){const r=await b(this,w,Vi).call(this);if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",r),r;({files:e}=this.getState())}const i=this.opts.onBeforeUpload(e);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(e=i,this.setState({files:e})),Promise.resolve().then(()=>p(this,X).validateMinNumberOfFiles(e)).catch(r=>{throw b(this,w,ve).call(this,[r]),r}).then(()=>{if(!b(this,w,wr).call(this,e))throw new Y(this.i18n("missingRequiredMetaField"))}).catch(r=>{throw r}).then(async()=>{const{currentUploads:r}=this.getState(),a=Object.values(r).flatMap(c=>c.fileIDs),o=[];Object.keys(e).forEach(c=>{const h=this.getFile(c);!h.progress.uploadStarted&&a.indexOf(c)===-1&&o.push(h.id)});const l=b(this,w,Ye).call(this,o),u=await b(this,w,Je).call(this,l);return this.emit("complete",u),u}).catch(r=>{throw this.emit("error",r),this.log(r,"error"),r}))}};K=new WeakMap,X=new WeakMap,ht=new WeakMap,Fe=new WeakMap,Ie=new WeakMap,Re=new WeakMap,Se=new WeakMap,w=new WeakSet,ve=function(e){for(const a of e)a.isRestriction?this.emit("restriction-failed",a.file,a):this.emit("error",a,a.file),this.log(a,"warning");const t=e.filter(a=>a.isUserFacing),i=4,n=t.slice(0,i),r=t.slice(i);n.forEach(({message:a,details:o=""})=>{this.info({message:a,details:o},"error",this.opts.infoTimeout)}),r.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:r.length})})},$i=function(e){const{missingFields:t,error:i}=p(this,X).getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:i.message}),this.log(i.message),this.emit("restriction-failed",e,i),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)},wr=function(e){let t=!0;for(const i of Object.values(e))b(this,w,$i).call(this,i)||(t=!1);return t},zi=function(e){const{allowNewUpload:t}=this.getState();if(t===!1){const i=new Y(this.i18n("noMoreFilesAllowed"),{file:e});throw b(this,w,ve).call(this,[i]),i}},Fr=function(e){const t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,i=yr(t),n=fo(i,t),r=gr(n).extension,a=Ga(t,this.getID()),o=t.meta||{};o.name=n,o.type=i;const l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:a,name:n,extension:r||"",meta:{...this.getState().meta,...o},type:i,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}},qi=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))},ji=function(e){var a;let{files:t}=this.getState(),i={...t};const n=[],r=[];for(const o of e)try{let l=b(this,w,Fr).call(this,o);const u=(a=t[l.id])==null?void 0:a.isGhost;u&&(l={...t[l.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));const c=this.opts.onBeforeFileAdded(l,i);if(t=this.getState().files,i={...t,...i},!c&&this.checkIfFileAlreadyExists(l.id))throw new Y(this.i18n("noDuplicates",{fileName:l.name??this.i18n("unnamed")}),{file:o});if(c===!1&&!u)throw new Y("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof c=="object"&&c!==null&&(l=c),p(this,X).validateSingleFile(l),i[l.id]=l,n.push(l)}catch(l){r.push(l)}try{p(this,X).validateAggregateRestrictions(Object.values(t),n)}catch(o){return r.push(o),{nextFilesState:t,validFilesToAdd:[],errors:r}}return{nextFilesState:i,validFilesToAdd:n,errors:r}},Hi=function(){const{files:e}=this.getState();return Object.keys(e).filter(t=>{const i=e[t];return i.error&&(!i.missingRequiredMetaFields||i.missingRequiredMetaFields.length===0)})},Vi=async function(){const e=b(this,w,Hi).call(this),t={...this.getState().files};if(e.forEach(n=>{t[n]={...t[n],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};const i=b(this,w,Ye).call(this,e,{forceAllowNewUpload:!0});return b(this,w,Je).call(this,i)},jt=new WeakMap,Wi=function(){const e=b(this,w,Sr).call(this);let t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})},Te=new WeakMap,Sr=function(){const t=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(t.length===0)return 0;if(t.every(l=>l.progress.uploadComplete))return 1;const i=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,n=t.filter(i),r=t.filter(l=>!i(l));if(n.every(l=>l.progress.uploadComplete)&&r.length>0&&!r.every(l=>l.progress.uploadComplete))return null;const a=n.reduce((l,u)=>l+(u.progress.bytesTotal??0),0),o=n.reduce((l,u)=>l+(u.progress.bytesUploaded||0),0);return a===0?0:o/a},Tr=function(){const e=(n,r,a)=>{let o=n.message||"Unknown error";n.details&&(o+=` ${n.details}`),this.setState({error:o}),r!=null&&r.id in this.getState().files&&this.setFileState(r.id,{error:o,response:a})};this.on("error",e),this.on("upload-error",(n,r,a)=>{if(e(r,n,a),typeof r=="object"&&r.message){this.log(r.message,"error");const o=new Error(this.i18n("failedToUpload",{file:(n==null?void 0:n.name)??""}));o.isUserFacing=!0,o.details=r.message,r.details&&(o.details+=` ${r.details}`),b(this,w,ve).call(this,[o])}else b(this,w,ve).call(this,[r])});let t=null;this.on("upload-stalled",(n,r)=>{const{message:a}=n,o=r.map(l=>l.meta.name).join(", ");t||(this.info({message:a,details:o},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${a} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const i=n=>{const r=n.filter(o=>{const l=o!=null&&this.getFile(o.id);return l||this.log(`Not setting progress for a file that has been removed: ${o==null?void 0:o.id}`),l}),a=Object.fromEntries(r.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(a)};this.on("upload-start",i),this.on("upload-progress",p(this,jt)),this.on("upload-success",(n,r)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}const a=this.getFile(n.id).progress;this.setFileState(n.id,{progress:{...a,postprocess:p(this,Se).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:a.bytesTotal},response:r,uploadURL:r.uploadURL,isPaused:!1}),n.size==null&&this.setFileState(n.id,{size:r.bytesUploaded||a.bytesTotal}),p(this,Te).call(this)}),this.on("preprocess-progress",(n,r)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}this.setFileState(n.id,{progress:{...this.getFile(n.id).progress,preprocess:r}})}),this.on("preprocess-complete",n=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}const r={...this.getState().files};r[n.id]={...r[n.id],progress:{...r[n.id].progress}},delete r[n.id].progress.preprocess,this.setState({files:r})}),this.on("postprocess-progress",(n,r)=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}this.setFileState(n.id,{progress:{...this.getState().files[n.id].progress,postprocess:r}})}),this.on("postprocess-complete",n=>{if(n==null||!this.getFile(n.id)){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}const r={...this.getState().files};r[n.id]={...r[n.id],progress:{...r[n.id].progress}},delete r[n.id].progress.postprocess,this.setState({files:r})}),this.on("restored",()=>{p(this,Te).call(this)}),this.on("dashboard:file-edit-complete",n=>{n&&b(this,w,$i).call(this,n)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",p(this,me)),window.addEventListener("offline",p(this,me)),setTimeout(p(this,me),3e3))},me=new WeakMap,ct=new WeakMap,Ye=function(e,t={}){const{forceAllowNewUpload:i=!1}=t,{allowNewUpload:n,currentUploads:r}=this.getState();if(!n&&!i)throw new Error("Cannot create a new upload: already uploading.");const a=hs();return this.emit("upload",a,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...r,[a]:{fileIDs:e,step:0,result:{}}}}),a},Pr=function(e){const{currentUploads:t}=this.getState();return t[e]},Dt=function(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})},Je=async function(e){const t=()=>{const{currentUploads:a}=this.getState();return a[e]};let i=t();const n=[...p(this,Ie),...p(this,Re),...p(this,Se)];try{for(let a=i.step||0;a<n.length&&i;a++){const o=n[a];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...i,step:a}}});const{fileIDs:l}=i;await o(l,e),i=t()}}catch(a){throw b(this,w,Dt).call(this,e),a}if(i){i.fileIDs.forEach(u=>{const c=this.getFile(u);c!=null&&c.progress.postprocess&&this.emit("postprocess-complete",c)});const a=i.fileIDs.map(u=>this.getFile(u)),o=a.filter(u=>!u.error),l=a.filter(u=>u.error);this.addResultData(e,{successful:o,failed:l,uploadID:e}),i=t()}let r;return i&&(r=i.result,b(this,w,Dt).call(this,e)),r==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),r={successful:[],failed:[],uploadID:e}),r},f(Ht,"VERSION",po.version);let Li=Ht;var Po=0;function d(s,e,t,i,n,r){e||(e={});var a,o,l=e;if("ref"in l)for(o in l={},e)o=="ref"?a=e[o]:l[o]=e[o];var u={type:s,props:l,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Po,__i:-1,__u:0,__source:n,__self:r};if(typeof s=="function"&&(a=s.defaultProps))for(o in a)l[o]===void 0&&(l[o]=a[o]);return C.vnode&&C.vnode(u),u}const Co="4.3.2",Eo={version:Co},gn=300;class ko extends W{constructor(){super(...arguments);f(this,"ref",va())}componentWillEnter(t){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(t,gn)}componentWillLeave(t){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(t,gn)}render(){const{children:t}=this.props;return d("div",{className:"uppy-Informer-animated",ref:this.ref,children:t})}}function Ao(s,e){return Object.assign(s,e)}function Oo(s,e){return(s==null?void 0:s.key)??e}function Uo(s,e){const t=s._ptgLinkedRefs||(s._ptgLinkedRefs={});return t[e]||(t[e]=i=>{s.refs[e]=i})}function Ke(s){const e={};for(let t=0;t<s.length;t++)if(s[t]!=null){const i=Oo(s[t],t.toString(36));e[i]=s[t]}return e}function No(s,e){s=s||{},e=e||{};const t=a=>Object.hasOwn(e,a)?e[a]:s[a],i={};let n=[];for(const a in s)Object.hasOwn(e,a)?n.length&&(i[a]=n,n=[]):n.push(a);const r={};for(const a in e){if(Object.hasOwn(i,a))for(let o=0;o<i[a].length;o++){const l=i[a][o];r[i[a][o]]=t(l)}r[a]=t(a)}for(let a=0;a<n.length;a++)r[n[a]]=t(n[a]);return r}const xo=s=>s;class Cr extends W{constructor(e,t){super(e,t),this.refs={},this.state={children:Ke(Q(Q(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){const t=Ke(Q(e.children)||[]),i=this.state.children;this.setState(r=>({children:No(r.children,t)}));let n;for(n in t)if(Object.hasOwn(t,n)){const r=i&&Object.hasOwn(i,n);t[n]&&r&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):t[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in i)if(Object.hasOwn(i,n)){const r=t&&Object.hasOwn(t,n);i[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){const t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const t=this.refs[e];t!=null&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=Ke(Q(this.props.children)||[]);(!i||!Object.hasOwn(i,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const t=this.refs[e];t!=null&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const t=this.refs[e];t!=null&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=Ke(Q(this.props.children)||[]);(!i||!Object.hasOwn(i,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i!=null&&i.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const i=this.refs[e];i!=null&&i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const n=Ke(Q(this.props.children)||[]);if(n&&Object.hasOwn(n,e))this.performEnter(e);else{const r=Ao({},this.state.children);delete r[e],this.setState({children:r})}}render({childFactory:e,transitionLeave:t,transitionName:i,transitionAppear:n,transitionEnter:r,transitionLeaveTimeout:a,transitionEnterTimeout:o,transitionAppearTimeout:l,component:u,...c},{children:h}){const m=Object.entries(h).map(([g,y])=>{if(!y)return;const F=Uo(this,g);return or(e(y),{ref:F,key:g})}).filter(Boolean);return nt(u,c,m)}}Cr.defaultProps={component:"span",childFactory:xo};class Er extends We{constructor(t,i){super(t,i);f(this,"render",t=>d("div",{className:"uppy uppy-Informer",children:d(Cr,{children:t.info.map(i=>d(ko,{children:d("p",{role:"alert",children:[i.message," ",i.details&&d("span",{"aria-label":i.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${i.message} 

 ${i.details}`),children:"?"})]})},i.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:t}=this.opts;t&&this.mount(t,this)}}f(Er,"VERSION",Eo.version);var wi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var yn;function Io(){return yn||(yn=1,(function(s){(function(){var e={}.hasOwnProperty;function t(){for(var r="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(r=n(r,i(o)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var o in r)e.call(r,o)&&r[o]&&(a=n(a,o));return a}function n(r,a){return a?r?r+" "+a:r+a:r}s.exports?(t.default=t,s.exports=t):window.classNames=t})()})(wi)),wi.exports}var Ro=Io();const te=Ge(Ro),Mo={position:"relative",width:"100%",minHeight:"100%"},Do={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class Bo extends W{constructor(t){super(t);f(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});f(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){var t;(t=this.focusElement)!=null&&t.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:t}=this.state;t!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:t,rowHeight:i,renderRow:n,overscanCount:r=10,...a}){const{offset:o,height:l}=this.state;let u=Math.floor(o/i),c=Math.floor(l/i);r&&(u=Math.max(0,u-u%r),c+=r);const h=u+c+4,m=t.slice(u,h),g={...Mo,height:t.length*i},y={...Do,top:u*i};return d("div",{onScroll:this.handleScroll,...a,children:d("div",{role:"presentation",style:g,children:d("div",{role:"presentation",style:y,children:m.map(n)})})})}}function Lo(){return d("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:d("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function bn(s,e,t,i){return s===e?s:i===0?e:s+(e-s)*2**(-i/t)}const $o="4.2.3",zo={version:$o},qo={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},ne={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function jo(s){const e=Math.floor(s/3600)%24,t=Math.floor(s/60)%60,i=Math.floor(s%60);return{hours:e,minutes:t,seconds:i}}function Ho(s){const e=jo(s),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${n}`}const Vo="Â·",vn=()=>` ${Vo} `;function Wo(s){const{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:n,uploadState:r,isSomeGhost:a,startUpload:o}=s,l=te("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===ne.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),u=e&&t&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return d("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:o,disabled:a,"data-uppy-super-focusable":!0,children:u})}function Go(s){const{i18n:e,uppy:t}=s;return d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:d("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function Ko(s){const{i18n:e,uppy:t}=s;return d("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:d("g",{fill:"none",fillRule:"evenodd",children:[d("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),d("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function Xo(s){const{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:n,uppy:r}=s,a=t(e?"resume":"pause");function o(){if(!i){if(!n){r.cancelAll();return}if(e){r.resumeAll();return}r.pauseAll()}}return d("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:d("g",{fill:"none",fillRule:"evenodd",children:[d("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),d("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function Yo(s){const{i18n:e,doneButtonHandler:t}=s;return d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function kr(){return d("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:d("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function Jo(s){const{progress:e}=s,{value:t,mode:i,message:n}=e;return d("div",{className:"uppy-StatusBar-content",children:[d(kr,{}),i==="determinate"?`${Math.round(t*100)}% Â· `:"",n]})}function Qo(s){const{numUploads:e,complete:t,totalUploadedSize:i,totalSize:n,totalETA:r,i18n:a}=s,o=e>1,l=we(i);return d("div",{className:"uppy-StatusBar-statusSecondary",children:[o&&a("filesUploadedOfTotal",{complete:t,smart_count:e}),d("span",{className:"uppy-StatusBar-additionalInfo",children:[o&&vn(),n!=null?a("dataUploadedOfTotal",{complete:l,total:we(n)}):a("dataUploadedOfUnknown",{complete:l}),vn(),r!=null&&a("xTimeLeft",{time:Ho(r)})]})]})}function Ar(s){const{i18n:e,complete:t,numUploads:i}=s;return d("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:i})})}function Zo(s){const{i18n:e,newFiles:t,startUpload:i}=s,n=te("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return d("div",{className:"uppy-StatusBar-statusSecondary",children:[d("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),d("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i,children:e("upload")})]})}function el(s){const{i18n:e,supportsUploadProgress:t,totalProgress:i,showProgressDetails:n,isUploadStarted:r,isAllComplete:a,isAllPaused:o,newFiles:l,numUploads:u,complete:c,totalUploadedSize:h,totalSize:m,totalETA:g,startUpload:y}=s,F=l&&r;if(!r||a)return null;const T=e(o?"paused":"uploading");function S(){return!o&&!F&&n?t?d(Qo,{numUploads:u,complete:c,totalUploadedSize:h,totalSize:m,totalETA:g,i18n:e}):d(Ar,{i18n:e,complete:c,numUploads:u}):null}return d("div",{className:"uppy-StatusBar-content",title:T,children:[o?null:d(kr,{}),d("div",{className:"uppy-StatusBar-status",children:[d("div",{className:"uppy-StatusBar-statusPrimary",children:t&&i!==0?`${T}: ${i}%`:T}),S(),F?d(Zo,{i18n:e,newFiles:l,startUpload:y}):null]})]})}function tl(s){const{i18n:e}=s;return d("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:d("div",{className:"uppy-StatusBar-status",children:d("div",{className:"uppy-StatusBar-statusPrimary",children:[d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:d("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function il(s){const{error:e,i18n:t,complete:i,numUploads:n}=s;function r(){const a=`${t("uploadFailed")} 

 ${e}`;alert(a)}return d("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:d("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),d("div",{className:"uppy-StatusBar-status",children:[d("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),d("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button",children:"?"})]}),d(Ar,{i18n:t,complete:i,numUploads:n})]})]})}function Fi(s){const e=[];let t="indeterminate",i;for(const{progress:r}of Object.values(s)){const{preprocess:a,postprocess:o}=r;i==null&&(a||o)&&({mode:t,message:i}=a||o),(a==null?void 0:a.mode)==="determinate"&&e.push(a.value),(o==null?void 0:o.mode)==="determinate"&&e.push(o.value)}const n=e.reduce((r,a)=>r+a/e.length,0);return{mode:t,message:i,value:n}}const{STATE_ERROR:_n,STATE_WAITING:sl,STATE_PREPROCESSING:Si,STATE_UPLOADING:Pt,STATE_POSTPROCESSING:Ti,STATE_COMPLETE:Ct}=ne;function nl({newFiles:s,allowNewUpload:e,isUploadInProgress:t,isAllPaused:i,resumableUploads:n,error:r,hideUploadButton:a=void 0,hidePauseResumeButton:o=!1,hideCancelButton:l=!1,hideRetryButton:u=!1,recoveredState:c,uploadState:h,totalProgress:m,files:g,supportsUploadProgress:y,hideAfterFinish:F=!1,isSomeGhost:T,doneButtonHandler:S=void 0,isUploadStarted:_,i18n:A,startUpload:O,uppy:P,isAllComplete:N,showProgressDetails:E=void 0,numUploads:z,complete:H,totalSize:G,totalETA:R,totalUploadedSize:V}){function x(){switch(h){case Ti:case Si:{const _t=Fi(g);return _t.mode==="determinate"?_t.value*100:m}case _n:return null;case Pt:return y?m:null;default:return m}}function ie(){switch(h){case Ti:case Si:{const{mode:_t}=Fi(g);return _t==="indeterminate"}case Pt:return!y;default:return!1}}const fe=x(),Oe=fe??100,bs=!r&&s&&(!t&&!i||c)&&e&&!a,vs=!l&&h!==sl&&h!==Ct,_s=n&&!o&&h===Pt,ws=r&&!N&&!u,Fs=S&&h===Ct,da=te("uppy-StatusBar-progress",{"is-indeterminate":ie()}),ua=te("uppy-StatusBar",`is-${h}`,{"has-ghosts":T}),Ss=(()=>{switch(h){case Si:case Ti:return d(Jo,{progress:Fi(g)});case Ct:return d(tl,{i18n:A});case _n:return d(il,{error:r,i18n:A,numUploads:z,complete:H});case Pt:return d(el,{i18n:A,supportsUploadProgress:y,totalProgress:m,showProgressDetails:E,isUploadStarted:_,isAllComplete:N,isAllPaused:i,newFiles:s,numUploads:z,complete:H,totalUploadedSize:V,totalSize:G,totalETA:R,startUpload:O});default:return null}})();return!(bs||ws||_s||vs||Fs)&&!Ss||h===Ct&&F?null:d("div",{className:ua,children:[d("div",{className:da,style:{width:`${Oe}%`},role:"progressbar","aria-label":`${Oe}%`,"aria-valuetext":`${Oe}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":fe}),Ss,d("div",{className:"uppy-StatusBar-actions",children:[bs?d(Wo,{newFiles:s,isUploadStarted:_,recoveredState:c,i18n:A,isSomeGhost:T,startUpload:O,uploadState:h}):null,ws?d(Go,{i18n:A,uppy:P}):null,_s?d(Xo,{isAllPaused:i,i18n:A,isAllComplete:N,resumableUploads:n,uppy:P}):null,vs?d(Ko,{i18n:A,uppy:P}):null,Fs?d(Yo,{i18n:A,doneButtonHandler:S}):null]})]})}const rl=2e3,al=2e3;function ol(s,e,t,i){if(s)return ne.STATE_ERROR;if(e)return ne.STATE_COMPLETE;if(t)return ne.STATE_WAITING;let n=ne.STATE_WAITING;const r=Object.keys(i);for(let a=0;a<r.length;a++){const{progress:o}=i[r[a]];if(o.uploadStarted&&!o.uploadComplete)return ne.STATE_UPLOADING;o.preprocess&&(n=ne.STATE_PREPROCESSING),o.postprocess&&n!==ne.STATE_PREPROCESSING&&(n=ne.STATE_POSTPROCESSING)}return n}const ll={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var ge,ye,Pe,he,Vt,Ur,pt;class Or extends We{constructor(t,i){super(t,{...ll,...i});v(this,Vt);v(this,ge);v(this,ye);v(this,Pe);v(this,he);f(this,"startUpload",()=>this.uppy.upload().catch((()=>{})));v(this,pt,()=>{const{recoveredState:t}=this.uppy.getState();if(k(this,Pe,null),k(this,he,null),t){k(this,ye,Object.values(t.files).reduce((i,{progress:n})=>i+n.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}k(this,ge,performance.now()),k(this,ye,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=qo,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(t){const{capabilities:i,files:n,allowNewUpload:r,totalProgress:a,error:o,recoveredState:l}=t,{newFiles:u,startedFiles:c,completeFiles:h,isUploadStarted:m,isAllComplete:g,isAllPaused:y,isUploadInProgress:F,isSomeGhost:T}=this.uppy.getObjectOfFilesPerState(),S=l?Object.values(n):u,_=!!i.resumableUploads,A=i.uploadProgress!==!1;let O=null,P=0;c.every(E=>E.progress.bytesTotal!=null&&E.progress.bytesTotal!==0)?(O=0,c.forEach(E=>{O+=E.progress.bytesTotal||0,P+=E.progress.bytesUploaded||0})):c.forEach(E=>{P+=E.progress.bytesUploaded||0});const N=b(this,Vt,Ur).call(this,{uploaded:P,total:O});return nl({error:o,uploadState:ol(o,g,l,t.files||{}),allowNewUpload:r,totalProgress:a,totalSize:O,totalUploadedSize:P,isAllComplete:!1,isAllPaused:y,isUploadStarted:m,isUploadInProgress:F,isSomeGhost:T,recoveredState:l,complete:h.length,newFiles:S.length,numUploads:c.length,totalETA:N,files:n,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:_,supportsUploadProgress:A,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const t=this.el;Xn(t)||(t.dir="ltr")}install(){const{target:t}=this.opts;t&&this.mount(t,this),this.uppy.on("upload",p(this,pt)),k(this,ge,performance.now()),k(this,ye,this.uppy.getFiles().reduce((i,n)=>i+n.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",p(this,pt))}}ge=new WeakMap,ye=new WeakMap,Pe=new WeakMap,he=new WeakMap,Vt=new WeakSet,Ur=function(t){if(t.total==null||t.total===0)return null;const i=t.total-t.uploaded;if(i<=0)return null;p(this,ge)??k(this,ge,performance.now());const n=performance.now()-p(this,ge);if(n===0)return Math.round((p(this,he)??0)/100)/10;const r=t.uploaded-p(this,ye);if(k(this,ye,t.uploaded),r<=0)return Math.round((p(this,he)??0)/100)/10;const a=r/n,o=p(this,Pe)==null?a:bn(a,p(this,Pe),rl,n);k(this,Pe,o);const l=i/o,u=Math.max(p(this,he)-n,0),c=p(this,he)==null?l:bn(l,u,al,n);return k(this,he,c),k(this,ge,performance.now()),Math.round(c/100)/10},pt=new WeakMap,f(Or,"VERSION",zo.version);const dl=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function ul(s,e,t){const i=dl.exec(s),n=e.mimeType??(i==null?void 0:i[1])??"plain/text";let r;if((i==null?void 0:i[2])!=null){const a=atob(decodeURIComponent(i[3])),o=new Uint8Array(a.length);for(let l=0;l<a.length;l++)o[l]=a.charCodeAt(l);r=[o]}else(i==null?void 0:i[3])!=null&&(r=[decodeURIComponent(i[3])]);return new Blob(r,{type:n})}function wn(s){return s.startsWith("blob:")}function Fn(s){return s?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(s):!1}function U(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var Nr=typeof self<"u"?self:global;const ot=typeof navigator<"u",hl=ot&&typeof HTMLImageElement>"u",Sn=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),xr=Nr.Buffer,Ir=!!xr,cl=s=>s!==void 0;function Rr(s){return s===void 0||(s instanceof Map?s.size===0:Object.values(s).filter(cl).length===0)}function B(s){let e=new Error(s);throw delete e.stack,e}function Tn(s){let e=(function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048})(s);return s.jfif.enabled&&(e+=50),s.xmp.enabled&&(e+=2e4),s.iptc.enabled&&(e+=14e3),s.icc.enabled&&(e+=6e3),e}const Pi=s=>String.fromCharCode.apply(null,s),Pn=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Z{static from(e,t){return e instanceof this&&e.le===t?e:new Z(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let r=new DataView(e,t,i);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Z){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&B("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,i);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else B("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=Z){return e instanceof DataView||e instanceof Z?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||B("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new Z(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),Pn?Pn.decode(n):Ir?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(Pi(n)));var n}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return Pi(i)}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return Pi(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Gi(s,e){B(`${s} '${e}' was not loaded, try using full build of exifr.`)}class cs extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Gi(this.kind,e),t&&(e in t||(function(i,n){B(`Unknown ${i} '${n}'.`)})(this.kind,e),t[e].enabled||Gi(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Mr=new cs("file parser"),J=new cs("segment parser"),ps=new cs("file reader");let pl=Nr.fetch;function Cn(s,e){return(t=s).startsWith("data:")||t.length>1e4?Xi(s,e,"base64"):Sn&&s.includes("://")?Ki(s,e,"url",En):Sn?Xi(s,e,"fs"):ot?Ki(s,e,"url",En):void B("Invalid input argument");var t}async function Ki(s,e,t,i){return ps.has(t)?Xi(s,e,t):i?(async function(n,r){let a=await r(n);return new Z(a)})(s,i):void B(`Parser ${t} is not loaded`)}async function Xi(s,e,t){let i=new(ps.get(t))(s,e);return await i.read(),i}const En=s=>pl(s).then((e=>e.arrayBuffer())),Yi=s=>new Promise(((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(s)})),fs=new Map,fl=new Map,ml=new Map,Et=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Dr=["jfif","xmp","icc","iptc","ihdr"],Ji=["tiff",...Dr],D=["ifd0","ifd1","exif","gps","interop"],kt=[...Ji,...D],At=["makerNote","userComment"],Br=["translateKeys","translateValues","reviveValues","multiSegment"],Ot=[...Br,"sanitize","mergeOutput","silentErrors"];class Lr{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Xe extends Lr{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),U(this,"enabled",!1),U(this,"skip",new Set),U(this,"pick",new Set),U(this,"deps",new Set),U(this,"translateKeys",!1),U(this,"translateValues",!1),U(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=D.includes(e),this.canBeFiltered&&(this.dict=fs.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:r,skip:a}=i;r&&r.length>0&&this.translateTagSet(r,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:B(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of Br)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:r,tagValues:a}=this.dict;for(i of e)typeof i=="string"?(n=a.indexOf(i),n===-1&&(n=r.indexOf(Number(i))),n!==-1&&t.add(Number(r[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,$t(this.pick,this.deps)):this.enabled&&this.pick.size>0&&$t(this.pick,this.deps)}}var j={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},kn=new Map;class ms extends Lr{static useCached(e){let t=kn.get(e);return t!==void 0||(t=new this(e),kn.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):B(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ot?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Et)this[e]=j[e];for(e of Ot)this[e]=j[e];for(e of At)this[e]=j[e];for(e of kt)this[e]=new Xe(e,j[e],void 0,this)}setupFromTrue(){let e;for(e of Et)this[e]=j[e];for(e of Ot)this[e]=j[e];for(e of At)this[e]=!0;for(e of kt)this[e]=new Xe(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Et)this[t]=j[t];for(t of Ot)this[t]=j[t];for(t of At)this[t]=j[t];for(t of kt)this[t]=new Xe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,D)}setupFromObject(e){let t;for(t of(D.ifd0=D.ifd0||D.image,D.ifd1=D.ifd1||D.thumbnail,Object.assign(this,e),Et))this[t]=Ci(e[t],j[t]);for(t of Ot)this[t]=Ci(e[t],j[t]);for(t of At)this[t]=Ci(e[t],j[t]);for(t of Ji)this[t]=new Xe(t,j[t],e[t],this);for(t of D)this[t]=new Xe(t,j[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,D,kt),e.tiff===!0?this.batchEnableWithBool(D,!0):e.tiff===!1?this.batchEnableWithUserValue(D,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,D):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,D)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let a of n)this[a].enabled=!1;let r=An(e,i);for(let[a,o]of r)$t(this[a].pick,o),this[a].enabled=!0}else if(t&&t.length){let r=An(t,i);for(let[a,o]of r)$t(this[a].skip,o)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=D.some((r=>this[r].enabled===!0))||this.makerNote||this.userComment;for(let r of D)this[r].finalizeFilters()}get onlyTiff(){return!Dr.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Ji)this[e].enabled&&!J.has(e)&&Gi("segment parser",e)}}function An(s,e){let t,i,n,r,a=[];for(n of e){for(r of(t=fs.get(n),i=[],t))(s.includes(r[0])||s.includes(r[1]))&&i.push(r[0]);i.length&&a.push([n,i])}return a}function Ci(s,e){return s!==void 0?s:e!==void 0?e:void 0}function $t(s,e){for(let t of e)s.add(t)}U(ms,"default",j);class gl{constructor(e){U(this,"parsers",{}),U(this,"output",{}),U(this,"errors",[]),U(this,"pushToErrors",(t=>this.errors.push(t))),this.options=ms.useCached(e)}async read(e){this.file=await(function(t,i){return typeof t=="string"?Cn(t,i):ot&&!hl&&t instanceof HTMLImageElement?Cn(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Z(t):ot&&t instanceof Blob?Ki(t,i,"blob",Yi):void B("Invalid input argument")})(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of Mr)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),B("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Rr(i=e)?void 0:i;var i}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async i=>{let n=await i.parse();i.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map((i=>i.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=J.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let r=await this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new i(r,e,t),o=await a.extractThumbnail();return t.close&&t.close(),o}}class Ne{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,r=t+n,a=i-n;return{offset:t,length:i,headerLength:n,start:r,size:a,end:r+a}}static parse(e,t={}){return new this(e,new ms({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Z?e:new Z(e)}constructor(e,t={},i){U(this,"errors",[]),U(this,"raw",new Map),U(this,"handleError",(n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)})),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=ml.get(t),n=fl.get(t),r=fs.get(t),a=this.options[t],o=a.reviveValues&&!!i,l=a.translateValues&&!!n,u=a.translateKeys&&!!r,c={};for(let[h,m]of e)o&&i.has(h)?m=i.get(h)(m):l&&n.has(h)&&(m=this.translateValue(m,n.get(h))),u&&r.has(h)&&(h=r.get(h)||h),c[h]=m;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}U(Ne,"headerLength",4),U(Ne,"type",void 0),U(Ne,"multiSegment",!1),U(Ne,"canHandle",(()=>!1));function yl(s){return s===192||s===194||s===196||s===219||s===221||s===218||s===254}function bl(s){return s>=224&&s<=239}function vl(s,e,t){for(let[i,n]of J)if(n.canHandle(s,e,t))return i}class On extends class{constructor(e,t,i){U(this,"errors",[]),U(this,"ensureSegmentChunk",(async n=>{let r=n.start,a=n.size||65536;if(this.file.chunked)if(this.file.available(r,a))n.chunk=this.file.subarray(r,a);else try{n.chunk=await this.file.readChunk(r,a)}catch(o){B(`Couldn't read segment: ${JSON.stringify(n)}. ${o.message}`)}else this.file.byteLength>r+a?n.chunk=this.file.subarray(r,a):n.size===void 0?n.chunk=this.file.subarray(r):B("Segment unreachable: "+JSON.stringify(n));return n.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(J.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,r=this.options[i];if(r&&r.enabled){let a=this.parsers[i];a&&a.append||a||this.createParser(i,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),U(this,"appSegments",[]),U(this,"jpegSegments",[]),U(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(J.keyList())):(e=e===void 0?J.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&J.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:r,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some((o=>{let l=J.get(o),u=this.options[o];return l.multiSegment&&u.multiSegment})),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let o=!1;for(;a.size>0&&!o&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,u=this.appSegments.some((c=>!this.file.available(c.offset||c.start,c.length||c.size)));if(o=e>l&&!u?!await i.readNextChunk(e):!await i.readNextChunk(l),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,n,r,a,o,l,{file:u,findAll:c,wanted:h,remaining:m,options:g}=this;for(;e<t;e++)if(u.getUint8(e)===255){if(i=u.getUint8(e+1),bl(i)){if(n=u.getUint16(e+2),r=vl(u,e,n),r&&h.has(r)&&(a=J.get(r),o=a.findPosition(u,e),l=g[r],o.type=r,this.appSegments.push(o),!c&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||m.delete(r)):m.delete(r),m.size===0)))break;g.recordUnknownSegments&&(o=Ne.findPosition(u,e),o.marker=i,this.unknownSegments.push(o)),e+=n+1}else if(yl(i)){if(n=u.getUint16(e+2),i===218&&g.stopAfterSos!==!1)return;g.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,i){let n,r,a,o=new Map;for(let l=0;l<t.length;l++)n=t[l],r=n[i],o.has(r)?a=o.get(r):o.set(r,a=[]),a.push(n);return Array.from(o)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,i])=>{let n=J.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}U(On,"type","jpeg"),Mr.set("jpeg",On);const _l=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class wl extends Ne{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:r}=this.options[t];n=new Set(n);let a=n.size>0,o=r.size===0,l=this.chunk.getUint16(e);e+=2;for(let u=0;u<l;u++){let c=this.chunk.getUint16(e);if(a){if(n.has(c)&&(i.set(c,this.parseTag(e,c,t)),n.delete(c),n.size===0))break}else!o&&r.has(c)||i.set(c,this.parseTag(e,c,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,r=n.getUint16(e+2),a=n.getUint32(e+4),o=_l[r];if(o*a<=4?e+=8:e=n.getUint32(e+8),(r<1||r>13)&&B(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>n.byteLength&&B(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${n.byteLength}`),r===1)return n.getUint8Array(e,a);if(r===2)return(l=(function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u})(l=n.getString(e,a)).trim())===""?void 0:l;var l;if(r===7)return n.getUint8Array(e,a);if(a===1)return this.parseTagValue(r,e);{let u=new((function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(r))(a),c=o;for(let h=0;h<a;h++)u[h]=this.parseTagValue(r,e),e+=c;return u}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:B(`Invalid tiff type ${e}`)}}}class Ei extends wl{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&B("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&B(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Tn(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Tn(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Un(...e.get(2),e.get(1))),e.set("longitude",Un(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of D)if(e=this[t],!Rr(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}}function Un(s,e,t,i){var n=s+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}U(Ei,"type","tiff"),U(Ei,"headerLength",10),J.set("tiff",Ei);const gs={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},gs,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},gs,{tiff:!1,ifd1:!0,mergeOutput:!1});const Fl=Object.assign({},gs,{firstChunkSize:4e4,ifd0:[274]});async function Sl(s){let e=new gl(Fl);await e.read(s);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const Tl=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Qe=!0,Ze=!0;if(typeof navigator=="object"){let s=navigator.userAgent;if(s.includes("iPad")||s.includes("iPhone")){let e=s.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;Qe=Number(t)+.1*Number(i)<13.4,Ze=!1}}else if(s.includes("OS X 10")){let[,e]=s.match(/OS X 10[_.](\d+)/);Qe=Ze=Number(e)<15}if(s.includes("Chrome/")){let[,e]=s.match(/Chrome\/(\d+)/);Qe=Ze=Number(e)<81}else if(s.includes("Firefox/")){let[,e]=s.match(/Firefox\/(\d+)/);Qe=Ze=Number(e)<77}}async function Pl(s){let e=await Sl(s);return Object.assign({canvas:Qe,css:Ze},Tl[e])}class Cl extends Z{constructor(...e){super(...e),U(this,"ranges",new El),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:r}=this._extend(n);this._swapDataView(r)}}}_extend(e){let t;t=Ir?xr.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class El{constructor(){U(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,r=this.list.filter((a=>Nn(e,a.offset,n)||Nn(e,a.end,n)));if(r.length>0){e=Math.min(e,...r.map((o=>o.offset))),n=Math.max(n,...r.map((o=>o.end))),t=n-e;let a=r.shift();a.offset=e,a.length=t,a.end=n,this.list=this.list.filter((o=>!r.includes(o)))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some((n=>n.offset<=e&&i<=n.end))}}function Nn(s,e,t){return s<=e&&e<=t}class kl extends Cl{constructor(e,t){super(0),U(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ps.set("blob",class extends kl{async readWhole(){this.chunked=!1;let s=await Yi(this.input);this._swapArrayBuffer(s)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(s,e){let t=e?s+e:void 0,i=this.input.slice(s,t),n=await Yi(i);return this.set(n,s,!0)}});const Al="4.2.3",Ol={version:Al},Ul={strings:{generatingThumbnails:"Generating thumbnails..."}};function Nl(s,e,t){try{s.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return s.toBlob?new Promise(i=>{s.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>ul(s.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function xl(s,e){let t=s.width,i=s.height;(e.deg===90||e.deg===270)&&(t=s.height,i=s.width);const n=document.createElement("canvas");n.width=t,n.height=i;const r=n.getContext("2d");return r.translate(t/2,i/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),n}function Il(s){const e=s.width/s.height,t=5e6,i=4096;let n=Math.floor(Math.sqrt(t*e)),r=Math.floor(t/Math.sqrt(t*e));if(n>i&&(n=i,r=Math.round(n/e)),r>i&&(r=i,n=Math.round(e*r)),s.width>n){const a=document.createElement("canvas");return a.width=n,a.height=r,a.getContext("2d").drawImage(s,0,0,n,r),a}return s}const Rl={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class $r extends We{constructor(t,i){super(t,{...Rl,...i});f(this,"queue");f(this,"queueProcessing");f(this,"defaultThumbnailDimension");f(this,"thumbnailType");f(this,"onFileAdded",t=>{!t.preview&&t.data&&Fn(t.type)&&!t.isRemote&&this.addToQueue(t.id)});f(this,"onCancelRequest",t=>{const i=this.queue.indexOf(t.id);i!==-1&&this.queue.splice(i,1)});f(this,"onFileRemoved",t=>{const i=this.queue.indexOf(t.id);i!==-1&&this.queue.splice(i,1),t.preview&&wn(t.preview)&&URL.revokeObjectURL(t.preview)});f(this,"onRestored",()=>{this.uppy.getFiles().filter(i=>i.isRestored).forEach(i=>{(!i.preview||wn(i.preview))&&this.addToQueue(i.id)})});f(this,"onAllFilesRemoved",()=>{this.queue=[]});f(this,"waitUntilAllProcessed",t=>{t.forEach(n=>{const r=this.uppy.getFile(n);this.uppy.emit("preprocess-progress",r,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const i=()=>{t.forEach(n=>{const r=this.uppy.getFile(n);this.uppy.emit("preprocess-complete",r)})};return new Promise(n=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{i(),n()}):(i(),n())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=Ul,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(t,i,n){const r=URL.createObjectURL(t.data),a=new Promise((l,u)=>{const c=new Image;c.src=r,c.addEventListener("load",()=>{URL.revokeObjectURL(r),l(c)}),c.addEventListener("error",h=>{URL.revokeObjectURL(r),u(h.error||new Error("Could not create thumbnail"))})}),o=Pl(t.data).catch(()=>1);return Promise.all([a,o]).then(([l,u])=>{const c=this.getProportionalDimensions(l,i,n,u.deg),h=xl(l,u),m=this.resizeImage(h,c.width,c.height);return Nl(m,this.thumbnailType,80)}).then(l=>URL.createObjectURL(l))}getProportionalDimensions(t,i,n,r){let a=t.width/t.height;if((r===90||r===270)&&(a=t.height/t.width),i!=null){let o=i;return t.width<i&&(o=t.width),{width:o,height:Math.round(o/a)}}if(n!=null){let o=n;return t.height<n&&(o=t.height),{width:Math.round(o*a),height:o}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/a)}}resizeImage(t,i,n){let r=Il(t),a=Math.ceil(Math.log2(r.width/i));a<1&&(a=1);let o=i*2**(a-1),l=n*2**(a-1);const u=2;for(;a--;){const c=document.createElement("canvas");c.width=o,c.height=l,c.getContext("2d").drawImage(r,0,0,o,l),r=c,o=Math.round(o/u),l=Math.round(l/u)}return r}setPreviewURL(t,i){this.uppy.setFileState(t,{preview:i})}addToQueue(t){this.queue.push(t),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(t){return Fn(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(i=>{this.setPreviewURL(t.id,i),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${t.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(t.id),i)}).catch(i=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${t.id}:`,"warning"),this.uppy.log(i,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(t.id),i)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}f($r,"VERSION",Ol.version);function xn(s){if(typeof s=="string"){const e=document.querySelectorAll(s);return e.length===0?null:Array.from(e)}return typeof s=="object"&&Kn(s)?[s]:null}const it=Array.from;function Ml(s){const e=it(s.files);return Promise.resolve(e)}function zr(s,e,t,{onSuccess:i}){s.readEntries(n=>{const r=[...e,...n];n.length?queueMicrotask(()=>{zr(s,r,t,{onSuccess:i})}):i(r)},n=>{t(n),i(e)})}function qr(s,e){return s==null?s:{kind:s.isFile?"file":s.isDirectory?"directory":void 0,name:s.name,getFile(){return new Promise((t,i)=>s.file(t,i))},async*values(){const t=s.createReader();yield*await new Promise(n=>{zr(t,[],e,{onSuccess:r=>n(r.map(a=>qr(a,e)))})})},isSameEntry:void 0}}async function*jr(s,e,t=void 0){const i=()=>`${e}/${s.name}`;if(s.kind==="file"){const n=await s.getFile();n!=null?(n.relativePath=e?i():null,yield n):t!=null&&(yield t)}else if(s.kind==="directory")for await(const n of s.values())yield*jr(n,e?i():s.name);else t!=null&&(yield t)}async function*Dl(s,e){const t=await Promise.all(Array.from(s.items,async i=>{let n;return n??(n=qr(typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry(),e)),{fileSystemHandle:n,lastResortFile:i.getAsFile()}}));for(const{lastResortFile:i,fileSystemHandle:n}of t)if(n!=null)try{yield*jr(n,"",i)}catch(r){i!=null?yield i:e(r)}else i!=null&&(yield i)}async function Bl(s,e){const t=(e==null?void 0:e.logDropError)??Function.prototype;try{const i=[];for await(const n of Dl(s,t))i.push(n);return i}catch{return Ml(s)}}const Ll="4.4.3",$l={version:Ll};function zl(){const s=document.body;return!(!("draggable"in s)||!("ondragstart"in s&&"ondrop"in s)||!("FormData"in window)||!("FileReader"in window))}class Hr extends W{constructor(){super(...arguments);f(this,"fileInput",null);f(this,"folderInput",null);f(this,"mobilePhotoFileInput",null);f(this,"mobileVideoFileInput",null);f(this,"triggerFileInputClick",()=>{var t;(t=this.fileInput)==null||t.click()});f(this,"triggerFolderInputClick",()=>{var t;(t=this.folderInput)==null||t.click()});f(this,"triggerVideoCameraInputClick",()=>{var t;(t=this.mobileVideoFileInput)==null||t.click()});f(this,"triggerPhotoCameraInputClick",()=>{var t;(t=this.mobilePhotoFileInput)==null||t.click()});f(this,"onFileInputChange",t=>{this.props.handleInputChange(t),t.currentTarget.value=""});f(this,"renderHiddenInput",(t,i)=>{var n;return d("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(n=this.props.allowedFileTypes)==null?void 0:n.join(", "),ref:i})});f(this,"renderHiddenCameraInput",(t,i,n)=>{const a={photo:"image/*",video:"video/*"}[t];return d("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${t}`,onChange:this.onFileInputChange,capture:i===""?"environment":i,accept:a,ref:n})});f(this,"renderMyDeviceAcquirer",()=>d("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[d("div",{className:"uppy-DashboardTab-inner",children:d("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:d("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),d("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));f(this,"renderPhotoCamera",()=>d("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[d("div",{className:"uppy-DashboardTab-inner",children:d("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:d("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),d("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));f(this,"renderVideoCamera",()=>d("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[d("div",{className:"uppy-DashboardTab-inner",children:d("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:d("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),d("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));f(this,"renderBrowseButton",(t,i)=>{const n=this.props.acquirers.length;return d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:i,"data-uppy-super-focusable":n===0,children:t})});f(this,"renderDropPasteBrowseTagline",t=>{const i=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),n=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),r=this.props.fileManagerSelectionType,a=r.charAt(0).toUpperCase()+r.slice(1);return d("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):t>0?this.props.i18nArray(`dropPasteImport${a}`,{browseFiles:i,browseFolders:n,browse:i}):this.props.i18nArray(`dropPaste${a}`,{browseFiles:i,browseFolders:n,browse:i})})});f(this,"renderAcquirer",t=>{var i;return d("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id,children:d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":`uppy-DashboardContent-panel--${t.id}`,"aria-selected":((i=this.props.activePickerPanel)==null?void 0:i.id)===t.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(t.id),children:[d("div",{className:"uppy-DashboardTab-inner",children:t.icon()}),d("div",{className:"uppy-DashboardTab-name",children:t.name})]})})});f(this,"renderAcquirers",t=>{const i=[...t],n=i.splice(t.length-2,t.length);return d(ee,{children:[i.map(r=>this.renderAcquirer(r)),d("span",{role:"presentation",style:{"white-space":"nowrap"},children:n.map(r=>this.renderAcquirer(r))})]})});f(this,"renderSourcesList",(t,i)=>{const{showNativePhotoCameraButton:n,showNativeVideoCameraButton:r}=this.props;let a=[];const o="myDevice";i||a.push({key:o,elements:this.renderMyDeviceAcquirer()}),n&&a.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),r&&a.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),a.push(...t.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),a.length===1&&a[0].key===o&&(a=[]);const u=[...a],c=u.splice(a.length-2,a.length);return d(ee,{children:[this.renderDropPasteBrowseTagline(a.length),d("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[u.map(({key:h,elements:m})=>d(ee,{children:m},h)),d("span",{role:"presentation",style:{"white-space":"nowrap"},children:c.map(({key:h,elements:m})=>d(ee,{children:m},h))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:t}=this.props,i=d("span",{children:[d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:d("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),d("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),n=t("poweredBy",{uppy:i});return d("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:n})}render(){const{showNativePhotoCameraButton:t,showNativeVideoCameraButton:i,nativeCameraFacingMode:n}=this.props;return d("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,r=>{this.fileInput=r}),this.renderHiddenInput(!0,r=>{this.folderInput=r}),t&&this.renderHiddenCameraInput("photo",n,r=>{this.mobilePhotoFileInput=r}),i&&this.renderHiddenCameraInput("video",n,r=>{this.mobileVideoFileInput=r}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),d("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&d("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const ql=s=>d("div",{className:te("uppy-Dashboard-AddFilesPanel",s.className),"data-uppy-panelType":"AddFiles","aria-hidden":!s.showAddFilesPanel,children:[d("div",{className:"uppy-DashboardContent-bar",children:[d("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s.i18n("addingMoreFiles")}),d("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>s.toggleAddFilesPanel(!1),children:s.i18n("back")})]}),d(Hr,{...s})]});function jl(s){const e=s.files[s.fileCardFor],t=()=>{s.uppy.emit("file-editor:cancel",e),s.closeFileEditor()};return d("div",{className:te("uppy-DashboardContent-panel",s.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[d("div",{className:"uppy-DashboardContent-bar",children:[d("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:s.i18nArray("editing",{file:d("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),d("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:s.i18n("cancel")}),d("button",{className:"uppy-DashboardContent-save",type:"button",onClick:s.saveFileEditor,children:s.i18n("save")})]}),d("div",{className:"uppy-DashboardContent-panelBody",children:s.editors.map(i=>s.uppy.getPlugin(i.id).render(s.state))})]})}function Hl(){return d("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:d("g",{fill:"#686DE0",fillRule:"evenodd",children:[d("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),d("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),d("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function Vl(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:d("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function Wl(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:d("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function Gl(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:d("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function Kl(){return d("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:d("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function Xl(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:d("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[d("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),d("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function Yl(){return d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:d("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function ys(s){const e={color:"#838999",icon:Xl()};if(!s)return e;const t=s.split("/")[0],i=s.split("/")[1];return t==="text"?{color:"#5a5e69",icon:Yl()}:t==="image"?{color:"#686de0",icon:Hl()}:t==="audio"?{color:"#068dbb",icon:Vl()}:t==="video"?{color:"#19af67",icon:Wl()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:Gl()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:Kl()}:e}function be(s){const{tagName:e}=s.target;if(e==="INPUT"||e==="TEXTAREA"){s.stopPropagation();return}s.preventDefault(),s.stopPropagation()}function Vr(s){const{file:e}=s;if(e.preview)return d("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:t,icon:i}=ys(e.type);return d("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[d("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:i}),d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:d("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function Jl(s){const{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:n,formState:r}=s,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(o=>{const l=`uppy-Dashboard-FileCard-input-${o.id}`,u=t.includes(o.id);return d("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[d("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l,children:o.name}),o.render!==void 0?o.render({value:r[o.id],onChange:c=>i(c,o.id),fieldCSSClasses:a,required:u,form:n.id},nt):d("input",{className:a.text,id:l,form:n.id,type:o.type||"text",required:u,value:r[o.id],placeholder:o.placeholder,onInput:c=>i(c.target.value,o.id),"data-uppy-super-focusable":!0})]},o.id)})}function Ql(s){const{files:e,fileCardFor:t,toggleFileCard:i,saveFileCard:n,metaFields:r,requiredMetaFields:a,openFileEditor:o,i18n:l,i18nArray:u,className:c,canEditFile:h}=s,m=()=>typeof r=="function"?r(e[t]):r,g=e[t],y=m()??[],F=h(g),T={};y.forEach(E=>{T[E.id]=g.meta[E.id]??""});const[S,_]=Lt(T),A=Ca(E=>{E.preventDefault(),n(S,t)},[n,S,t]),O=(E,z)=>{_({...S,[z]:E})},P=()=>{i(!1)},[N]=Lt(()=>{const E=document.createElement("form");return E.setAttribute("tabindex","-1"),E.id=hs(),E});return Di(()=>(document.body.appendChild(N),N.addEventListener("submit",A),()=>{N.removeEventListener("submit",A),document.body.removeChild(N)}),[N,A]),d("div",{className:te("uppy-Dashboard-FileCard",c),"data-uppy-panelType":"FileCard",onDragOver:be,onDragLeave:be,onDrop:be,onPaste:be,children:[d("div",{className:"uppy-DashboardContent-bar",children:[d("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:u("editing",{file:d("span",{className:"uppy-DashboardContent-titleFile",children:g.meta?g.meta.name:g.name})})}),d("button",{className:"uppy-DashboardContent-back",type:"button",form:N.id,title:l("finishEditingFile"),onClick:P,children:l("cancel")})]}),d("div",{className:"uppy-Dashboard-FileCard-inner",children:[d("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:ys(g.type).color},children:[d(Vr,{file:g}),F&&d("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:E=>{A(E),o(g)},children:l("editImage")})]}),d("div",{className:"uppy-Dashboard-FileCard-info",children:d(Jl,{computedMetaFields:y,requiredMetaFields:a,updateMeta:O,form:N,formState:S})}),d("div",{className:"uppy-Dashboard-FileCard-actions",children:[d("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:N.id,children:l("saveChanges")}),d("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:P,form:N.id,children:l("cancel")})]})]})]})}function Zl(s,e){if(s===e)return!0;if(!s||!e)return!1;const t=Object.keys(s),i=Object.keys(e),n=t.length;if(i.length!==n)return!1;for(let r=0;r<n;r++){const a=t[r];if(s[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}function ed(s,e="Copy the URL below"){return new Promise(t=>{const i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=s,document.body.appendChild(i),i.select();const n=()=>{document.body.removeChild(i),window.prompt(e,s),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):n()}catch{return document.body.removeChild(i),n()}})}function td({file:s,uploadInProgressOrComplete:e,metaFields:t,canEditFile:i,i18n:n,onClick:r}){return!e&&t&&t.length>0||!e&&i(s)?d("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":n("editFileWithFilename",{file:s.meta.name}),title:n("editFileWithFilename",{file:s.meta.name}),onClick:()=>r(),children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:d("g",{fillRule:"evenodd",children:[d("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),d("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),d("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function id({i18n:s,onClick:e,file:t}){return d("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":s("removeFile",{file:t.meta.name}),title:s("removeFile",{file:t.meta.name}),onClick:()=>e(),children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[d("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),d("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function sd({file:s,uppy:e,i18n:t}){const i=n=>{ed(s.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>n.target.focus({preventScroll:!0}))};return d("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:n=>i(n),children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:d("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function nd(s){const{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,showLinkToFileUploadResult:a,showRemoveButton:o,i18n:l,toggleFileCard:u,openFileEditor:c}=s;return d("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[d(td,{i18n:l,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,onClick:()=>{r&&r.length>0?u(!0,t.id):c(t)}}),a&&t.uploadURL?d(sd,{file:t,uppy:e,i18n:l}):null,o?d(id,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null]})}const ki="...";function Wr(s,e){if(e===0)return"";if(s.length<=e)return s;if(e<=ki.length+1)return`${s.slice(0,e-1)}â€¦`;const t=e-ki.length,i=Math.ceil(t/2),n=Math.floor(t/2);return s.slice(0,i)+ki+s.slice(-n)}const rd=(s,e)=>(typeof e=="function"?e():e).filter(n=>n.id===s)[0].name;function Gr(s){const{file:e,toggleFileCard:t,i18n:i,metaFields:n}=s,{missingRequiredMetaFields:r}=e;if(!(r!=null&&r.length))return null;const a=r.map(o=>rd(o,n)).join(", ");return d("div",{className:"uppy-Dashboard-Item-errorMessage",children:[i("missingRequiredMetaFields",{smart_count:r.length,fields:a})," ",d("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:i("editFile")})]})}const ad=s=>{const{author:e,name:t}=s.file.meta;function i(){return s.isSingleFile&&s.containerHeight>=350?90:s.containerWidth<=352?35:s.containerWidth<=576?60:e?20:30}return d("div",{className:"uppy-Dashboard-Item-name",title:t,children:Wr(t,i())})},od=s=>{var n;const{author:e}=s.file.meta,t=(n=s.file.remote)==null?void 0:n.providerName,i="Â·";return e?d("div",{className:"uppy-Dashboard-Item-author",children:[d("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:Wr(e.name,13)}),t?d(ee,{children:[` ${i} `,t,` ${i} `]}):null]}):null},ld=s=>s.file.size&&d("div",{className:"uppy-Dashboard-Item-statusSize",children:we(s.file.size)}),dd=s=>s.file.isGhost&&d("span",{children:[" â€¢ ",d("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>s.toggleAddFilesPanel(!0),children:s.i18n("reSelect")})]}),ud=({file:s,onClick:e})=>s.error?d("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":s.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function hd(s){const{file:e,i18n:t,toggleFileCard:i,metaFields:n,toggleAddFilesPanel:r,isSingleFile:a,containerHeight:o,containerWidth:l}=s;return d("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[d("div",{className:"uppy-Dashboard-Item-fileName",children:[ad({file:e,isSingleFile:a,containerHeight:o,containerWidth:l}),d(ud,{file:e,onClick:()=>alert(e.error)})]}),d("div",{className:"uppy-Dashboard-Item-status",children:[od({file:e}),ld({file:e}),dd({file:e,toggleAddFilesPanel:r,i18n:t})]}),d(Gr,{file:e,i18n:t,toggleFileCard:i,metaFields:n})]})}function cd(s){const{file:e,i18n:t,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:r}=s,o=e.preview?"rgba(255, 255, 255, 0.5)":ys(e.type).color;return d("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:o},children:[r&&e.uploadURL&&d("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:d("span",{hidden:!0,children:e.meta.name})}),d(Vr,{file:e}),d(Gr,{file:e,i18n:t,toggleFileCard:i,metaFields:n})]})}function pd(s){if(!s.isUploaded){if(s.error&&!s.hideRetryButton){s.uppy.retryUpload(s.file.id);return}s.resumableUploads&&!s.hidePauseResumeButton?s.uppy.pauseResume(s.file.id):s.individualCancellation&&!s.hideCancelButton&&s.uppy.removeFile(s.file.id)}}function In(s){return s.isUploaded?s.i18n("uploadComplete"):s.error?s.i18n("retryUpload"):s.resumableUploads?s.file.isPaused?s.i18n("resumeUpload"):s.i18n("pauseUpload"):s.individualCancellation?s.i18n("cancelUpload"):""}function Ai(s){return d("div",{className:"uppy-Dashboard-Item-progress",children:d("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":In(s),title:In(s),onClick:()=>pd(s),children:s.children})})}function Ut({children:s}){return d("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:s})}function Oi({progress:s}){const e=2*Math.PI*15;return d("g",{children:[d("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),d("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*s})]})}function fd(s){return!s.file.progress.uploadStarted||s.file.progress.percentage===void 0?null:s.isUploaded?d("div",{className:"uppy-Dashboard-Item-progress",children:d("div",{className:"uppy-Dashboard-Item-progressIndicator",children:d(Ut,{children:[d("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),d("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):s.recoveredState?null:s.error&&!s.hideRetryButton?d(Ai,{...s,children:d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[d("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),d("path",{d:"M7.9 3H10v2H7.9z"}),d("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),d("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):s.resumableUploads&&!s.hidePauseResumeButton?d(Ai,{...s,children:d(Ut,{children:[d(Oi,{progress:s.file.progress.percentage}),s.file.isPaused?d("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):d("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[d("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),d("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!s.resumableUploads&&s.individualCancellation&&!s.hideCancelButton?d(Ai,{...s,children:d(Ut,{children:[d(Oi,{progress:s.file.progress.percentage}),d("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):d("div",{className:"uppy-Dashboard-Item-progress",children:d("div",{className:"uppy-Dashboard-Item-progressIndicator",children:d(Ut,{children:d(Oi,{progress:s.file.progress.percentage})})})})}class md extends W{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Zl(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,a=e.error||!1,{isGhost:o}=e;let l=(this.props.individualCancellation||!r)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);const u=te({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return d("div",{className:u,id:`uppy_${e.id}`,role:this.props.role,children:[d("div",{className:"uppy-Dashboard-Item-preview",children:[d(cd,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),d(fd,{uppy:this.props.uppy,file:e,error:a,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),d("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[d(hd,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),d(nd,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function gd(s,e){const t=[];let i=[];return s.forEach(n=>{i.length<e?i.push(n):(t.push(i),i=[n])}),i.length&&t.push(i),t}function yd({id:s,i18n:e,uppy:t,files:i,resumableUploads:n,hideRetryButton:r,hidePauseResumeButton:a,hideCancelButton:o,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:u,metaFields:c,isSingleFile:h,toggleFileCard:m,handleRequestThumbnail:g,handleCancelThumbnail:y,recoveredState:F,individualCancellation:T,itemsPerRow:S,openFileEditor:_,canEditFile:A,toggleAddFilesPanel:O,containerWidth:P,containerHeight:N}){const E=S===1?71:200,z=ds(()=>{const G=(V,x)=>Number(i[x].isGhost)-Number(i[V].isGhost),R=Object.keys(i);return F&&R.sort(G),gd(R,S)},[i,S,F]),H=G=>d("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:G.map(R=>d(md,{uppy:t,id:s,i18n:e,resumableUploads:n,individualCancellation:T,hideRetryButton:r,hidePauseResumeButton:a,hideCancelButton:o,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:u,metaFields:c,recoveredState:F,isSingleFile:h,containerWidth:P,containerHeight:N,toggleFileCard:m,handleRequestThumbnail:g,handleCancelThumbnail:y,role:"listitem",openFileEditor:_,canEditFile:A,toggleAddFilesPanel:O,file:i[R]},R))},G[0]);return h?d("div",{class:"uppy-Dashboard-files",children:H(z[0])}):d(Bo,{class:"uppy-Dashboard-files",role:"list",data:z,renderRow:H,rowHeight:E})}function bd({activePickerPanel:s,className:e,hideAllPanels:t,i18n:i,state:n,uppy:r}){const a=Rt(null);return d("div",{className:te("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${s.id}`,onDragOver:be,onDragLeave:be,onDrop:be,onPaste:be,children:[d("div",{className:"uppy-DashboardContent-bar",children:[d("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i("importFrom",{name:s.name})}),d("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i("cancel")})]}),d("div",{ref:a,className:"uppy-DashboardContent-panelBody",children:r.getPlugin(s.id).render(n,a.current)})]})}const se={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function vd(s,e,t,i={}){if(s)return se.STATE_ERROR;if(e)return se.STATE_COMPLETE;if(t)return se.STATE_PAUSED;let n=se.STATE_WAITING;const r=Object.keys(i);for(let a=0;a<r.length;a++){const{progress:o}=i[r[a]];if(o.uploadStarted&&!o.uploadComplete)return se.STATE_UPLOADING;o.preprocess&&n!==se.STATE_UPLOADING&&(n=se.STATE_PREPROCESSING),o.postprocess&&n!==se.STATE_UPLOADING&&n!==se.STATE_PREPROCESSING&&(n=se.STATE_POSTPROCESSING)}return n}function _d({files:s,i18n:e,isAllComplete:t,isAllErrored:i,isAllPaused:n,inProgressNotPausedFiles:r,newFiles:a,processingFiles:o}){switch(vd(i,t,n,s)){case"uploading":return e("uploadingXFiles",{smart_count:r.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:o.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:a.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function wd(s){const{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:r,uppy:a}=s;let{allowNewUpload:o}=s;return o&&n&&(o=s.totalFileCount<s.maxNumberOfFiles),d("div",{className:"uppy-DashboardContent-bar",children:[!t&&!i?d("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll(),children:e("cancel")}):d("div",{}),d("div",{className:"uppy-DashboardContent-title",children:d(_d,{...s})}),o?d("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0),children:[d("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:d("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),d("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):d("div",{})]})}const Ue="uppy-transition-slideDownUp",Rn=250;function Nt({children:s}){const[e,t]=Lt(null),[i,n]=Lt(""),r=Rt(),a=Rt(),o=Rt(),l=()=>{n(`${Ue}-enter`),cancelAnimationFrame(o.current),clearTimeout(a.current),a.current=void 0,o.current=requestAnimationFrame(()=>{n(`${Ue}-enter ${Ue}-enter-active`),r.current=setTimeout(()=>{n("")},Rn)})},u=()=>{n(`${Ue}-leave`),cancelAnimationFrame(o.current),clearTimeout(r.current),r.current=void 0,o.current=requestAnimationFrame(()=>{n(`${Ue}-leave ${Ue}-leave-active`),a.current=setTimeout(()=>{t(null),n("")},Rn)})};return Di(()=>{const c=Q(s)[0];e!==c&&(c&&!e?l():e&&!c&&!a.current&&u(),t(c))},[s,e]),Di(()=>()=>{clearTimeout(r.current),clearTimeout(a.current),cancelAnimationFrame(o.current)},[]),e?or(e,{className:te(i,e.props.className)}):null}const Mn=900,Dn=700,Ui=576,Bn=330;function Fd(s){const e=s.totalFileCount===0,t=s.totalFileCount===1,i=s.containerWidth>Ui,n=s.containerHeight>Bn,r=te({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":s.disabled,"uppy-Dashboard--animateOpenClose":s.animateOpenClose,"uppy-Dashboard--isClosing":s.isClosing,"uppy-Dashboard--isDraggingOver":s.isDraggingOver,"uppy-Dashboard--modal":!s.inline,"uppy-size--md":s.containerWidth>Ui,"uppy-size--lg":s.containerWidth>Dn,"uppy-size--xl":s.containerWidth>Mn,"uppy-size--height-md":s.containerHeight>Bn,"uppy-Dashboard--isAddFilesPanelVisible":s.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":s.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":s.singleFileFullScreen&&t&&n});let a=1;s.containerWidth>Mn?a=5:s.containerWidth>Dn?a=4:s.containerWidth>Ui&&(a=3);const o=s.showSelectedFiles&&!e,l=s.recoveredState?Object.keys(s.recoveredState.files).length:null,u=s.files?Object.keys(s.files).filter(m=>s.files[m].isGhost).length:0,c=()=>u>0?s.i18n("recoveredXFiles",{smart_count:u}):s.i18n("recoveredAllFiles");return d("div",{className:r,"data-uppy-theme":s.theme,"data-uppy-num-acquirers":s.acquirers.length,"data-uppy-drag-drop-supported":!s.disableLocalFiles&&zl(),"aria-hidden":s.inline?"false":s.isHidden,"aria-disabled":s.disabled,"aria-label":s.inline?s.i18n("dashboardTitle"):s.i18n("dashboardWindowTitle"),onPaste:s.handlePaste,onDragOver:s.handleDragOver,onDragLeave:s.handleDragLeave,onDrop:s.handleDrop,children:[d("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:s.handleClickOutside}),d("div",{className:"uppy-Dashboard-inner",role:s.inline?void 0:"dialog",style:{width:s.inline&&s.width?s.width:"",height:s.inline&&s.height?s.height:""},children:[s.inline?null:d("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":s.i18n("closeModal"),title:s.i18n("closeModal"),onClick:s.closeModal,children:d("span",{"aria-hidden":"true",children:"Ã—"})}),d("div",{className:"uppy-Dashboard-innerWrap",children:[d("div",{className:"uppy-Dashboard-dropFilesHereHint",children:s.i18n("dropHint")}),o&&d(wd,{...s}),l&&d("div",{className:"uppy-Dashboard-serviceMsg",children:[d("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:d("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[d("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),d("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),d("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),d("strong",{className:"uppy-Dashboard-serviceMsg-title",children:s.i18n("sessionRestored")}),d("div",{className:"uppy-Dashboard-serviceMsg-text",children:c()})]}),o?d(yd,{id:s.id,i18n:s.i18n,uppy:s.uppy,files:s.files,resumableUploads:s.resumableUploads,hideRetryButton:s.hideRetryButton,hidePauseResumeButton:s.hidePauseResumeButton,hideCancelButton:s.hideCancelButton,showLinkToFileUploadResult:s.showLinkToFileUploadResult,showRemoveButtonAfterComplete:s.showRemoveButtonAfterComplete,metaFields:s.metaFields,toggleFileCard:s.toggleFileCard,handleRequestThumbnail:s.handleRequestThumbnail,handleCancelThumbnail:s.handleCancelThumbnail,recoveredState:s.recoveredState,individualCancellation:s.individualCancellation,openFileEditor:s.openFileEditor,canEditFile:s.canEditFile,toggleAddFilesPanel:s.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:a,containerWidth:s.containerWidth,containerHeight:s.containerHeight}):d(Hr,{i18n:s.i18n,i18nArray:s.i18nArray,acquirers:s.acquirers,handleInputChange:s.handleInputChange,maxNumberOfFiles:s.maxNumberOfFiles,allowedFileTypes:s.allowedFileTypes,showNativePhotoCameraButton:s.showNativePhotoCameraButton,showNativeVideoCameraButton:s.showNativeVideoCameraButton,nativeCameraFacingMode:s.nativeCameraFacingMode,showPanel:s.showPanel,activePickerPanel:s.activePickerPanel,disableLocalFiles:s.disableLocalFiles,fileManagerSelectionType:s.fileManagerSelectionType,note:s.note,proudlyDisplayPoweredByUppy:s.proudlyDisplayPoweredByUppy}),d(Nt,{children:s.showAddFilesPanel?d(ql,{...s,isSizeMD:i},"AddFiles"):null}),d(Nt,{children:s.fileCardFor?d(Ql,{...s},"FileCard"):null}),d(Nt,{children:s.activePickerPanel?d(bd,{...s},"Picker"):null}),d(Nt,{children:s.showFileEditor?d(jl,{...s},"Editor"):null}),d("div",{className:"uppy-Dashboard-progressindicators",children:s.progressindicators.map(m=>s.uppy.getPlugin(m.id).render(s.state))})]})]})]})}const Sd={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},Kr=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var Td=_r();const Pd=Ge(Td);function Xr(s,e){if(e){const t=s.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return s}function Cd(){let s=!1;return Pd((t,i)=>{const n=Xr(t,i),r=n.contains(document.activeElement);if(r&&s)return;const a=n.querySelector("[data-uppy-super-focusable]");if(!(r&&!a))if(a)a.focus({preventScroll:!0}),s=!0;else{const o=n.querySelector(Kr);o==null||o.focus({preventScroll:!0}),s=!1}},260)}function Ln(s,e){const t=e[0];t&&(t.focus(),s.preventDefault())}function Ed(s,e){const t=e[e.length-1];t&&(t.focus(),s.preventDefault())}function kd(s){return s.contains(document.activeElement)}function Yr(s,e,t){const i=Xr(t,e),n=it(i.querySelectorAll(Kr)),r=n.indexOf(document.activeElement);kd(i)?s.shiftKey&&r===0?Ed(s,n):!s.shiftKey&&r===n.length-1&&Ln(s,n):Ln(s,n)}function Ad(s,e,t){e===null||Yr(s,e,t)}const $n=9,Od=27;function zn(){const s={};return s.promise=new Promise((e,t)=>{s.resolve=e,s.reject=t}),s}const Ud={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Lo,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var Me,Ce,ft,De,Wt,Gt,Kt,Ee,Xt,Yt,Be,L,Qi,Zi,Qr,es,ts,Zr;class Jr extends We{constructor(t,i){var r;const n=(i==null?void 0:i.autoOpen)??null;super(t,{...Ud,...i,autoOpen:n});v(this,L);v(this,Me);f(this,"modalName",`uppy-Dashboard-${hs()}`);f(this,"superFocus",Cd());f(this,"ifFocusedOnUppyRecently",!1);f(this,"dashboardIsDisabled");f(this,"savedScrollPosition");f(this,"savedActiveElement");f(this,"resizeObserver");f(this,"darkModeMediaQuery");f(this,"makeDashboardInsidesVisibleAnywayTimeout");f(this,"removeTarget",t=>{const n=this.getPluginState().targets.filter(r=>r.id!==t.id);this.setPluginState({targets:n})});f(this,"addTarget",t=>{const i=t.id||t.constructor.name,n=t.title||i,r=t.type;if(r!=="acquirer"&&r!=="progressindicator"&&r!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const a={id:i,name:n,type:r},l=this.getPluginState().targets.slice();return l.push(a),this.setPluginState({targets:l}),this.el});f(this,"hideAllPanels",()=>{var n;const t=this.getPluginState(),i={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};t.activePickerPanel===i.activePickerPanel&&t.showAddFilesPanel===i.showAddFilesPanel&&t.showFileEditor===i.showFileEditor&&t.activeOverlayType===i.activeOverlayType||(this.setPluginState(i),this.uppy.emit("dashboard:close-panel",(n=t.activePickerPanel)==null?void 0:n.id))});f(this,"showPanel",t=>{const{targets:i}=this.getPluginState(),n=i.find(r=>r.type==="acquirer"&&r.id===t);this.setPluginState({activePickerPanel:n,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",t)});f(this,"canEditFile",t=>{const{targets:i}=this.getPluginState();return p(this,Ee).call(this,i).some(r=>this.uppy.getPlugin(r.id).canEditFile(t))});f(this,"openFileEditor",t=>{const{targets:i}=this.getPluginState(),n=p(this,Ee).call(this,i);this.setPluginState({showFileEditor:!0,fileCardFor:t.id||null,activeOverlayType:"FileEditor"}),n.forEach(r=>{this.uppy.getPlugin(r.id).selectFile(t)})});f(this,"closeFileEditor",()=>{const{metaFields:t}=this.getPluginState();t&&t.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});f(this,"saveFileEditor",()=>{const{targets:t}=this.getPluginState();p(this,Ee).call(this,t).forEach(n=>{this.uppy.getPlugin(n.id).save()}),this.closeFileEditor()});f(this,"openModal",()=>{const{promise:t,resolve:i}=zn();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const n=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",n,!1),i()};this.el.addEventListener("animationend",n,!1)}else this.setPluginState({isHidden:!1}),i();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),t});f(this,"closeModal",t=>{var l;const i=(t==null?void 0:t.manualClose)??!0,{isHidden:n,isClosing:r}=this.getPluginState();if(n||r)return;const{promise:a,resolve:o}=zn();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const u=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",u,!1),o()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),i&&this.opts.browserBackButtonClose&&(l=history.state)!=null&&l[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),a});f(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);f(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());f(this,"setDarkModeCapability",t=>{const{capabilities:i}=this.uppy.getState();this.uppy.setState({capabilities:{...i,darkMode:t}})});f(this,"handleSystemDarkModeChange",t=>{const i=t.matches;this.uppy.log(`[Dashboard] Dark mode is ${i?"on":"off"}`),this.setDarkModeCapability(i)});f(this,"toggleFileCard",(t,i)=>{const n=this.uppy.getFile(i);t?this.uppy.emit("dashboard:file-edit-start",n):this.uppy.emit("dashboard:file-edit-complete",n),this.setPluginState({fileCardFor:t?i:null,activeOverlayType:t?"FileCard":null})});f(this,"toggleAddFilesPanel",t=>{this.setPluginState({showAddFilesPanel:t,activeOverlayType:t?"AddFiles":null})});f(this,"addFiles",t=>{const i=t.map(n=>({source:this.id,name:n.name,type:n.type,data:n,meta:{relativePath:n.relativePath||n.webkitRelativePath||null}}));try{this.uppy.addFiles(i)}catch(n){this.uppy.log(n)}});f(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(t=>{const i=t[0],{width:n,height:r}=i.contentRect;this.setPluginState({containerWidth:n,containerHeight:r,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const t=this.getPluginState(),i=!this.opts.inline&&t.isHidden;!t.areInsidesReadyToBeVisible&&!i&&(this.uppy.log("[Dashboard] resize event didnâ€™t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});f(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});f(this,"recordIfFocusedOnUppyRecently",t=>{this.el.contains(t.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});f(this,"disableInteractiveElements",t=>{const i=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],n=p(this,Me)??it(this.el.querySelectorAll(i)).filter(r=>!r.classList.contains("uppy-Dashboard-close"));for(const r of n)r.tagName==="A"?r.setAttribute("aria-disabled",t):r.disabled=t;t?k(this,Me,n):k(this,Me,null),this.dashboardIsDisabled=t});f(this,"updateBrowserHistory",()=>{var t;(t=history.state)!=null&&t[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});f(this,"handlePopState",t=>{var i;this.isModalOpen()&&(!t.state||!t.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((i=t.state)!=null&&i[this.modalName])&&history.back()});f(this,"handleKeyDownInModal",t=>{t.keyCode===Od&&this.requestCloseModal(),t.keyCode===$n&&Yr(t,this.getPluginState().activeOverlayType,this.el)});f(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});f(this,"handlePaste",t=>{this.uppy.iteratePlugins(n=>{var r;n.type==="acquirer"&&((r=n.handleRootPaste)==null||r.call(n,t))});const i=it(t.clipboardData.files);i.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(i))});f(this,"handleInputChange",t=>{t.preventDefault();const i=it(t.currentTarget.files||[]);i.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(i))});f(this,"handleDragOver",t=>{t.preventDefault(),t.stopPropagation();const i=()=>{let o=!0;return this.uppy.iteratePlugins(l=>{var u;(u=l.canHandleRootDrop)!=null&&u.call(l,t)&&(o=!0)}),o},n=()=>{const{types:o}=t.dataTransfer;return o.some(l=>l==="Files")},r=i(),a=n();if(!r&&!a||this.opts.disabled||this.opts.disableLocalFiles&&(a||!r)||!this.uppy.getState().allowNewUpload){t.dataTransfer.dropEffect="none";return}t.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(t)});f(this,"handleDragLeave",t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(t)});f(this,"handleDrop",async t=>{t.preventDefault(),t.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(a=>{var o;a.type==="acquirer"&&((o=a.handleRootDrop)==null||o.call(a,t))});let i=!1;const n=a=>{this.uppy.log(a,"error"),i||(this.uppy.info(a.message,"error"),i=!0)};this.uppy.log("[Dashboard] Processing dropped files");const r=await Bl(t.dataTransfer,{logDropError:n});r.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(r)),this.opts.onDrop(t)});f(this,"handleRequestThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",t)});f(this,"handleCancelThumbnail",t=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",t)});f(this,"handleKeyDownInInline",t=>{t.keyCode===$n&&Ad(t,this.getPluginState().activeOverlayType,this.el)});f(this,"handlePasteOnBody",t=>{this.el.contains(document.activeElement)&&this.handlePaste(t)});f(this,"handleComplete",({failed:t})=>{this.opts.closeAfterFinish&&!(t!=null&&t.length)&&this.requestCloseModal()});f(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});v(this,Ce,()=>{if(this.opts.disableThumbnailGenerator)return;const t=600,i=this.uppy.getFiles();if(i.length===1){const n=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);n==null||n.setOptions({thumbnailWidth:t});const r={...i[0],preview:void 0};n==null||n.requestThumbnail(r).then(()=>{n==null||n.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});v(this,ft,t=>{const i=t[0],{metaFields:n}=this.getPluginState(),r=n&&n.length>0,a=this.canEditFile(i);r&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,i.id):a&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(i)});f(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const t=xn(this.opts.trigger);t?t.forEach(i=>i.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",p(this,Be)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",p(this,Ce)),this.uppy.on("file-removed",p(this,Ce)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",p(this,ft))});f(this,"removeEvents",()=>{const t=xn(this.opts.trigger);!this.opts.inline&&t&&t.forEach(i=>i.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",p(this,Be)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",p(this,Ce)),this.uppy.off("file-removed",p(this,Ce)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",p(this,ft))});f(this,"superFocusOnEachUpdate",()=>{const t=this.el.contains(document.activeElement),i=document.activeElement===document.body||document.activeElement===null,n=this.uppy.getState().info.length===0,r=!this.opts.inline;n&&(r||t||i&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});f(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});f(this,"saveFileCard",(t,i)=>{this.uppy.setFileMeta(i,t),this.toggleFileCard(!1,i)});v(this,De,t=>{const i=this.uppy.getPlugin(t.id);return{...t,icon:i.icon||this.opts.defaultPickerIcon,render:i.render}});v(this,Wt,t=>{const i=this.uppy.getPlugin(t.id);return typeof i.isSupported!="function"?!0:i.isSupported()});v(this,Gt,t=>t.filter(i=>i.type==="acquirer"&&p(this,Wt).call(this,i)).map(p(this,De)));v(this,Kt,t=>t.filter(i=>i.type==="progressindicator").map(p(this,De)));v(this,Ee,t=>t.filter(i=>i.type==="editor").map(p(this,De)));f(this,"render",t=>{const i=this.getPluginState(),{files:n,capabilities:r,allowNewUpload:a}=t,{newFiles:o,uploadStartedFiles:l,completeFiles:u,erroredFiles:c,inProgressFiles:h,inProgressNotPausedFiles:m,processingFiles:g,isUploadStarted:y,isAllComplete:F,isAllPaused:T}=this.uppy.getObjectOfFilesPerState(),S=p(this,Gt).call(this,i.targets),_=p(this,Kt).call(this,i.targets),A=p(this,Ee).call(this,i.targets);let O;return this.opts.theme==="auto"?O=r.darkMode?"dark":"light":O=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Fd({state:t,isHidden:i.isHidden,files:n,newFiles:o,uploadStartedFiles:l,completeFiles:u,erroredFiles:c,inProgressFiles:h,inProgressNotPausedFiles:m,processingFiles:g,isUploadStarted:y,isAllComplete:F,isAllPaused:T,totalFileCount:Object.keys(n).length,totalProgress:t.totalProgress,allowNewUpload:a,acquirers:S,theme:O,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:i.activePickerPanel,showFileEditor:i.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:i.isClosing,progressindicators:_,editors:A,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:t.recoveredState,metaFields:i.metaFields,resumableUploads:r.resumableUploads||!1,individualCancellation:r.individualCancellation,isMobileDevice:r.isMobileDevice,fileCardFor:i.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:i.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:i.containerWidth,containerHeight:i.containerHeight,areInsidesReadyToBeVisible:i.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:i.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});v(this,Xt,()=>{const{plugins:t}=this.opts;t.forEach(i=>{const n=this.uppy.getPlugin(i);n?n.mount(this,n):this.uppy.log(`[Uppy] Dashboard could not find plugin '${i}', make sure to uppy.use() the plugins you are specifying`,"warning")})});v(this,Yt,()=>{this.uppy.iteratePlugins(p(this,Be))});v(this,Be,t=>{var n;const i=["acquirer","editor"];t&&!((n=t.opts)!=null&&n.target)&&i.includes(t.type)&&(this.getPluginState().targets.some(a=>t.id===a.id)||t.mount(this,t))});f(this,"install",()=>{var l;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:t,closeAfterFinish:i}=this.opts;if(t&&i)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:n,allowMultipleUploadBatches:r}=this.uppy.opts;(n||r)&&i&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:a}=this.opts;a&&this.mount(a,this),this.opts.disableStatusBar||this.uppy.use(Or,{id:b(this,L,es).call(this),target:this,...b(this,L,Qi).call(this)}),this.opts.disableInformer||this.uppy.use(Er,{id:b(this,L,Zr).call(this),target:this,...b(this,L,Qr).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use($r,{id:b(this,L,ts).call(this),...b(this,L,Zi).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&((l=this.darkModeMediaQuery)==null||l.addListener(this.handleSystemDarkModeChange)),p(this,Xt).call(this),p(this,Yt).call(this),this.initEvents()});f(this,"uninstall",()=>{var i;if(!this.opts.disableInformer){const n=this.uppy.getPlugin(`${this.id}:Informer`);n&&this.uppy.removePlugin(n)}if(!this.opts.disableStatusBar){const n=this.uppy.getPlugin(`${this.id}:StatusBar`);n&&this.uppy.removePlugin(n)}if(!this.opts.disableThumbnailGenerator){const n=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);n&&this.uppy.removePlugin(n)}const{plugins:t}=this.opts;t.forEach(n=>{const r=this.uppy.getPlugin(n);r&&r.unmount()}),this.opts.theme==="auto"&&((i=this.darkModeMediaQuery)==null||i.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=Sd,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(r=this.opts).onRequestCloseModal??(r.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(t){var i,n;super.setOptions(t),(i=this.uppy.getPlugin(b(this,L,es).call(this)))==null||i.setOptions(b(this,L,Qi).call(this)),(n=this.uppy.getPlugin(b(this,L,ts).call(this)))==null||n.setOptions(b(this,L,Zi).call(this))}}Me=new WeakMap,Ce=new WeakMap,ft=new WeakMap,De=new WeakMap,Wt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,Ee=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,Be=new WeakMap,L=new WeakSet,Qi=function(){const{hideUploadButton:t,hideRetryButton:i,hidePauseResumeButton:n,hideCancelButton:r,showProgressDetails:a,hideProgressAfterFinish:o,locale:l,doneButtonHandler:u}=this.opts;return{hideUploadButton:t,hideRetryButton:i,hidePauseResumeButton:n,hideCancelButton:r,showProgressDetails:a,hideAfterFinish:o,locale:l,doneButtonHandler:u}},Zi=function(){const{thumbnailWidth:t,thumbnailHeight:i,thumbnailType:n,waitForThumbnailsBeforeUpload:r}=this.opts;return{thumbnailWidth:t,thumbnailHeight:i,thumbnailType:n,waitForThumbnailsBeforeUpload:r,lazy:!r}},Qr=function(){return{}},es=function(){return`${this.id}:StatusBar`},ts=function(){return`${this.id}:ThumbnailGenerator`},Zr=function(){return`${this.id}:Informer`},f(Jr,"VERSION",$l.version);var re,mt;class Nd{constructor(e){v(this,re);v(this,mt,[]);k(this,re,e)}on(e,t){return p(this,mt).push([e,t]),p(this,re).on(e,t)}remove(){for(const[e,t]of p(this,mt).splice(0))p(this,re).off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,n)=>{e===(i==null?void 0:i.id)&&t(n)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,n)=>{e===(i==null?void 0:i.id)&&t(n)})}onRetry(e,t){this.on("upload-retry",i=>{e===(i==null?void 0:i.id)&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{p(this,re).getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{p(this,re).getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...i)=>{p(this,re).getFile(e)&&t(...i)})}onResumeAll(e,t){this.on("resume-all",()=>{p(this,re).getFile(e)&&t()})}}re=new WeakMap,mt=new WeakMap;class is extends Error{constructor(t,i=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");f(this,"cause");f(this,"isNetworkError");f(this,"request");this.cause=t,this.isNetworkError=!0,this.request=i}}var ke,Le,gt,$e;class xd{constructor(e,t){v(this,ke);v(this,Le,!1);v(this,gt);v(this,$e);k(this,$e,e),k(this,gt,()=>t(e))}progress(){p(this,Le)||p(this,$e)>0&&(clearTimeout(p(this,ke)),k(this,ke,setTimeout(p(this,gt),p(this,$e))))}done(){p(this,Le)||(clearTimeout(p(this,ke)),k(this,ke,void 0),k(this,Le,!0))}}ke=new WeakMap,Le=new WeakMap,gt=new WeakMap,$e=new WeakMap;const xt=()=>{};function Id(s,e={}){const{body:t=null,headers:i={},method:n="GET",onBeforeRequest:r=xt,onUploadProgress:a=xt,shouldRetry:o=()=>!0,onAfterResponse:l=xt,onTimeout:u=xt,responseType:c,retries:h=3,signal:m=null,timeout:g=3e4,withCredentials:y=!1}=e,F=_=>.3*2**(_-1)*1e3,T=new xd(g,u);function S(_=0){return new Promise(async(A,O)=>{const P=new XMLHttpRequest,N=E=>{o(P)&&_<h?setTimeout(()=>{S(_+1).then(A,O)},F(_)):(T.done(),O(E))};P.open(n,s,!0),P.withCredentials=y,c&&(P.responseType=c),m==null||m.addEventListener("abort",()=>{P.abort(),O(new DOMException("Aborted","AbortError"))}),P.onload=async()=>{try{await l(P,_)}catch(E){E.request=P,N(E);return}P.status>=200&&P.status<300?(T.done(),A(P)):o(P)&&_<h?setTimeout(()=>{S(_+1).then(A,O)},F(_)):(T.done(),O(new is(P.statusText,P)))},P.onerror=()=>N(new is(P.statusText,P)),P.upload.onprogress=E=>{T.progress(),a(E)},i&&Object.keys(i).forEach(E=>{P.setRequestHeader(E,i[E])}),await r(P,_),P.send(t)})}return S()}function Rd(s){const e=t=>"error"in t&&!!t.error;return s.filter(t=>!e(t))}function Md(s){return s.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function qn(s,e){return s===!0?Object.keys(e):Array.isArray(s)?s:[]}function Dd(s){return s?s.readyState!==0&&s.readyState!==4||s.status===0:!1}function Bd(s){return new Error("Cancelled",{cause:s})}function jn(s){var e;if(s!=null){const t=()=>this.abort(s.reason);s.addEventListener("abort",t,{once:!0});const i=()=>{s.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var ce,ae,pe,ze,oe,qe,Ae,q,ss,et,ea,ta,ia,Jt,je;class Ld{constructor(e){v(this,q);v(this,ce,0);v(this,ae,[]);v(this,pe,!1);v(this,ze);v(this,oe,1);v(this,qe);v(this,Ae);f(this,"limit");v(this,Jt,()=>this.resume());v(this,je,()=>{if(p(this,pe)){k(this,Ae,setTimeout(p(this,je),0));return}k(this,oe,this.limit),this.limit=Math.ceil((p(this,qe)+p(this,oe))/2);for(let e=p(this,oe);e<=this.limit;e++)b(this,q,et).call(this);p(this,qe)-p(this,oe)>3?k(this,Ae,setTimeout(p(this,je),2e3)):k(this,oe,Math.floor(p(this,oe)/2))});typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!p(this,pe)&&p(this,ce)<this.limit?b(this,q,ss).call(this,e):b(this,q,ta).call(this,e,t)}wrapSyncFunction(e,t){return(...i)=>{const n=this.run(()=>(e(...i),queueMicrotask(()=>n.done()),()=>{}),t);return{abortOn:jn,abort(){n.abort()}}}}wrapPromiseFunction(e,t){return(...i)=>{let n;const r=new Promise((a,o)=>{n=this.run(()=>{let l,u;try{u=Promise.resolve(e(...i))}catch(c){u=Promise.reject(c)}return u.then(c=>{l?o(l):(n.done(),a(c))},c=>{l?o(l):(n.done(),o(c))}),c=>{l=Bd(c)}},t)});return r.abort=a=>{n.abort(a)},r.abortOn=jn,r}}resume(){k(this,pe,!1),clearTimeout(p(this,ze));for(let e=0;e<this.limit;e++)b(this,q,et).call(this)}pause(e=null){k(this,pe,!0),clearTimeout(p(this,ze)),e!=null&&k(this,ze,setTimeout(p(this,Jt),e))}rateLimit(e){clearTimeout(p(this,Ae)),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(k(this,qe,this.limit-1),this.limit=p(this,oe),k(this,Ae,setTimeout(p(this,je),e)))}get isPaused(){return p(this,pe)}}ce=new WeakMap,ae=new WeakMap,pe=new WeakMap,ze=new WeakMap,oe=new WeakMap,qe=new WeakMap,Ae=new WeakMap,q=new WeakSet,ss=function(e){k(this,ce,p(this,ce)+1);let t=!1,i;try{i=e()}catch(n){throw k(this,ce,p(this,ce)-1),n}return{abort:n=>{t||(t=!0,k(this,ce,p(this,ce)-1),i==null||i(n),b(this,q,et).call(this))},done:()=>{t||(t=!0,k(this,ce,p(this,ce)-1),b(this,q,et).call(this))}}},et=function(){queueMicrotask(()=>b(this,q,ea).call(this))},ea=function(){if(p(this,pe)||p(this,ce)>=this.limit||p(this,ae).length===0)return;const e=p(this,ae).shift();if(e==null)throw new Error("Invariant violation: next is null");const t=b(this,q,ss).call(this,e.fn);e.abort=t.abort,e.done=t.done},ta=function(e,t){const i={fn:e,priority:(t==null?void 0:t.priority)||0,abort:()=>{b(this,q,ia).call(this,i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},n=p(this,ae).findIndex(r=>i.priority>r.priority);return n===-1?p(this,ae).push(i):p(this,ae).splice(n,0,i),i},ia=function(e){const t=p(this,ae).indexOf(e);t!==-1&&p(this,ae).splice(t,1)},Jt=new WeakMap,je=new WeakMap;const Ni=Symbol("__queue"),$d="4.4.2",zd={version:$d},qd={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function jd(s,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),Dd(s)?(t=new is(t,s),t):(t.request=s,t)}function Hn(s){return s.data.slice(0,s.data.size,s.meta.type)}const Hd={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""};var He,ue,na,ra,aa,oa,yt;class sa extends Gn{constructor(t,i){super(t,{...Hd,fieldName:i.bundle?"files[]":"file",...i});v(this,ue);v(this,He);f(this,"requests");f(this,"uploaderEvents");v(this,yt,async t=>{if(t.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[Ni]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const i=this.uppy.getFilesByIds(t),n=Rd(i),r=Md(n);if(this.uppy.emit("upload-start",r),this.opts.bundle){if(n.some(o=>o.isRemote))throw new Error("Canâ€™t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await b(this,ue,ra).call(this,n)}else await b(this,ue,oa).call(this,n)});if(this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=qd,this.i18nInit(),Ni in this.opts?this.requests=this.opts[Ni]:this.requests=new Ld(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if((i==null?void 0:i.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),k(this,He,n=>async(r,a)=>{var o,l;try{const u=await Id(r,{...a,onBeforeRequest:(m,g)=>{var y,F;return(F=(y=this.opts).onBeforeRequest)==null?void 0:F.call(y,m,g,n)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:m=>{const g=Math.ceil(m/1e3),y=new Error(this.i18n("uploadStalled",{seconds:g}));this.uppy.emit("upload-stalled",y,n)},onUploadProgress:m=>{if(m.lengthComputable)for(const{id:g}of n){const y=this.uppy.getFile(g);this.uppy.emit("upload-progress",y,{uploadStarted:y.progress.uploadStarted??0,bytesUploaded:m.loaded/m.total*y.size,bytesTotal:y.size})}}});let c=await((l=(o=this.opts).getResponseData)==null?void 0:l.call(o,u));if(u.responseType==="json")c??(c=u.response);else try{c??(c=JSON.parse(u.responseText))}catch(m){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:m})}const h=typeof(c==null?void 0:c.url)=="string"?c.url:void 0;for(const{id:m}of n)this.uppy.emit("upload-success",this.uppy.getFile(m),{status:u.status,body:c,uploadURL:h});return u}catch(u){if(u.name==="AbortError")return;const c=u.request;for(const h of n)this.uppy.emit("upload-error",this.uppy.getFile(h.id),jd(c,u),c);throw u}})}getOptions(t){const i=this.uppy.getState().xhrUpload,{headers:n}=this.opts,r={...this.opts,...i||{},...t.xhrUpload||{},headers:{}};return typeof n=="function"?r.headers=n(t):Object.assign(r.headers,this.opts.headers),i&&Object.assign(r.headers,i.headers),t.xhrUpload&&Object.assign(r.headers,t.xhrUpload.headers),r}addMetadata(t,i,n){qn(n.allowedMetaFields,i).forEach(a=>{const o=i[a];Array.isArray(o)?o.forEach(l=>t.append(a,l)):t.append(a,o)})}createFormDataUpload(t,i){const n=new FormData;this.addMetadata(n,t.meta,i);const r=Hn(t);return t.name?n.append(i.fieldName,r,t.meta.name):n.append(i.fieldName,r),n}createBundledUpload(t,i){const n=new FormData,{meta:r}=this.uppy.getState();return this.addMetadata(n,r,i),t.forEach(a=>{const o=this.getOptions(a),l=Hn(a);a.name?n.append(o.fieldName,l,a.name):n.append(o.fieldName,l)}),n}install(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!1}})}this.uppy.addUploader(p(this,yt))}uninstall(){if(this.opts.bundle){const{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,individualCancellation:!0}})}this.uppy.removeUploader(p(this,yt))}}He=new WeakMap,ue=new WeakSet,na=async function(t){const i=new Nd(this.uppy),n=new AbortController,r=this.requests.wrapPromiseFunction(async()=>{const a=this.getOptions(t),o=p(this,He).call(this,[t]),l=a.formData?this.createFormDataUpload(t,a):t.data,u=typeof a.endpoint=="string"?a.endpoint:await a.endpoint(t);return o(u,{...a,body:l,signal:n.signal})});i.onFileRemove(t.id,()=>n.abort()),i.onCancelAll(t.id,()=>{n.abort()});try{await r().abortOn(n.signal)}catch(a){if(a.message!=="Cancelled")throw a}finally{i.remove()}},ra=async function(t){const i=new AbortController,n=this.requests.wrapPromiseFunction(async()=>{const a=this.uppy.getState().xhrUpload??{},o=p(this,He).call(this,t),l=this.createBundledUpload(t,{...this.opts,...a}),u=typeof this.opts.endpoint=="string"?this.opts.endpoint:await this.opts.endpoint(t);return o(u,{...this.opts,body:l,signal:i.signal})});function r(){i.abort()}this.uppy.once("cancel-all",r);try{await n().abortOn(i.signal)}catch(a){if(a.message!=="Cancelled")throw a}finally{this.uppy.off("cancel-all",r)}},aa=function(t){var r;const i=this.getOptions(t),n=qn(i.allowedMetaFields,t.meta);return{...(r=t.remote)==null?void 0:r.body,protocol:"multipart",endpoint:i.endpoint,size:t.data.size,fieldname:i.fieldName,metadata:Object.fromEntries(n.map(a=>[a,t.meta[a]])),httpMethod:i.method,useFormData:i.formData,headers:i.headers}},oa=async function(t){await Promise.allSettled(t.map(i=>{if(i.isRemote){const n=()=>this.requests,r=new AbortController,a=l=>{l.id===i.id&&r.abort()};this.uppy.on("file-removed",a);const o=this.uppy.getRequestClientForFile(i).uploadRemoteFile(i,b(this,ue,aa).call(this,i),{signal:r.signal,getQueue:n});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",a)},{priority:-1})(),o}return b(this,ue,na).call(this,i)}))},yt=new WeakMap,f(sa,"VERSION",zd.version);const Vd=document.querySelector('input[type="hidden"][data-maxFileSize]').getAttribute("data-maxFileSize")*1024;let Wd=document.querySelector("input[data-allowedFileTypes]").getAttribute("data-allowedFileTypes").split(",").map(s=>(s=s.trim(),s.includes("/")?s:"."+s));const de=new Li({locale:{strings:{dropPasteFiles:"HÃºzd ide a fÃ¡jlokat vagy %{browse}",browse:"tallÃ³zz"}},restrictions:{maxFileSize:parseInt(Vd),allowedFileTypes:Wd}}).on("file-added",s=>{console.log("FÃ¡jlnÃ©v:",s.name),console.log("MIME-tÃ­pus:",s.type)}).use(Jr,{inline:!0,target:"#uppy-dashboard",showProgressDetails:!0,proudlyDisplayPoweredByUppy:!1,note:"Szia User!",minHeight:300,maxHeight:600,doneButtonHandler:()=>{window.closeUploadModal()}}).use(sa,{endpoint:"/admin/upload",formData:!0,fieldName:"file",limit:1,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json"},validateStatus:s=>s>=200&&s<500,onAfterResponse(s){var t;if(s.status!==422)return;let e;try{e=JSON.parse(s.responseText)}catch{throw console.error("JSON parse error:",s.responseText),new Error("HibÃ¡s szerver vÃ¡lasz")}if((t=e.errors)!=null&&t.file)return Promise.reject(new Error(e.errors.file[0]))},getResponseData:(s,e)=>{try{return JSON.parse(s)}catch{return{success:!1,message:"HibÃ¡s vÃ¡laszformÃ¡tum"}}}}),Gd=$("#post_id").data("id");de.setMeta({post_id:Gd});de.on("upload-error",(s,e,t)=>{var i;if(console.error("Szerver vÃ¡lasz:",e,t),(i=e==null?void 0:e.response)!=null&&i.body){const n=e.response.body;de.info({message:n.message||"FeltÃ¶ltÃ©si hiba",details:n.errors?Object.values(n.errors).flat().join(", "):null,type:"error",duration:5e3})}else de.info({message:e.message||"HÃ¡lÃ³zati hiba",type:"error",duration:5e3})});de.on("complete",()=>{console.log("Upload Files - Complete")});$("#_previewModal").click(function(s){$(s.target).is("#previewModal")&&$("#previewModal").addClass("hidden")});function la(){if($("#uploadModal").hasClass(".hidden")==!1){var s=$("#uploadModalContent").height();$("#uploadModal .uppy-Dashboard-innerWrap").height(s-100)}}$(window).on("resize",function(){la()});window.openUploadModal=()=>{Vn(),document.getElementById("uploadModal").classList.remove("hidden"),la(),de.getPlugin("Dashboard").openModal()};window.closeUploadModal=()=>{document.getElementById("uploadModal").classList.add("hidden"),de.getPlugin("Dashboard").closeModal(),de.cancelAll(),Vn()};document.getElementById("uploadModal").addEventListener("click",s=>{s.target.closest(".bg-white")});de.on("upload-progress",(s,e)=>{const t=document.querySelector("#uppy-dashboard");if(e.bytesUploaded&&e.bytesTotal){const i=t.scrollHeight,n=t.scrollTop,r=t.clientHeight,a=e.bytesUploaded/e.bytesTotal*100;n+r<i&&a===100&&(t.scrollTop=i)}});de.on("complete",s=>{document.getElementById("upload-info").innerHTML=`
        ${s.successful.length} fÃ¡jl sikeresen feltÃ¶ltve!<br>
        HibÃ¡k: ${s.failed.length}
        `});
