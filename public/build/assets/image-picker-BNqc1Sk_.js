import"./jquery-uoon-iQo.js";function P(e){$("#imagePickerModal .selectorImageDiv").toggleClass("flex",!e),$("#imagePickerModal .selectorImageDiv label").toggleClass("items-center",!e).toggleClass("aspect-square flex",e),$("#imagePickerModal .selectorImage").toggleClass("min-w-full min-h-full object-cover object-center",e)}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("myeditor");if($("#tabImages").on("click",function(){$("#manageAlbumImagesGrid .image-checkbox-checked").removeClass("image-checkbox-checked")}),$("#closeModal").on("click",function(){$("#imagePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden")}),$(e).length>0){let i=null;$(e).on("click",function(o){o.ctrlKey&&o.button===0&&(console.log("window.editor:Click:OpenImagePickerModal"),A("editor"),$(window.editor).blur())}),e.addEventListener("touchstart",function(o){o.touches.length===2&&(i=setTimeout(function(){console.log("Touch:Editor:Cick:OpenModal"),A("editor"),setTimeout(()=>window.editor.blur(),1e3)},1e3))},{passive:!0}),e.addEventListener("touchmove",function(o){o.touches.length<2&&clearTimeout(i)},{passive:!0}),e.addEventListener("touchend",function(o){o.touches.length<2&&clearTimeout(i)},{passive:!0})}$("#moveSelectedImageLeft").on("click",function(){const i=$(".image-checkbox-checked").closest(".selectorImageDiv");if(i.length===0)return;const c=i.first().prev(".selectorImageDiv");c.length>0&&i.detach().insertBefore(c),$(".sortable-grid").sortable("refresh"),t()}),$("#moveSelectedImageRight").on("click",function(){const i=$(".image-checkbox-checked").closest(".selectorImageDiv");if(i.length===0)return;const c=i.last().next(".selectorImageDiv");c.length>0&&i.detach().insertAfter(c),$(".sortable-grid").sortable("refresh"),t()});function t(){const i=$(".sortable-grid .selectorImageDiv").map(function(){return $(this).data("image-id")}).get();console.log("NEW ORDER AFTER MOVE: "+i.join(",")),$("#imageOrder").val(i.join(",")),console.log("√öj sorrend ment√©se:",i)}function a(){if($("#editAlbumTabContent").hasClass("hidden")==!1){const i=$("#manageAlbumImages .selectorImageDiv").length===0;$("#insertAlbum").toggleClass("bg-blue-500 hover:bg-blue-400",!i).toggleClass("bg-gray-500 hover:bg-gray-400",i).prop("disabled",i)}}function l(){setTimeout(()=>{const i=$("#manageAlbumImages .image-checkbox-checked").length>0;console.log("Kiej√∂ltek sz√°ma: "+length),console.log("is Disabled: "+i),$("#moveSelectedImageLeft, #moveSelectedImageRight").toggleClass("bg-gray-300",!i).toggleClass("bg-blue-500",i).prop("disabled",!i)},100)}$("#imagePickerModal").on("mousedown contextmenu",function(i){return i.preventDefault(),i.stopPropagation(),!0});let r=null;$("#imagePickerModal").on("mousedown",".selectorImage",function(i){"ontouchstart"in window||(i.which===3&&(i.preventDefault(),i.stopPropagation(),g($(this).parent(),i,!1,!1)),i.which===1&&i.shiftKey==1&&(i.preventDefault(),i.stopPropagation(),g($(this).parent(),i,!1,!0)))}).on("click contextmenu",".selectorImageOpenPreviewModal",function(i){if(i.which===3||i.which===1&&i.shiftKey==1){const o=$(this).parent();g(o,i,!1,i.shiftKey),i.preventDefault()}if(i.which===1&&i.shiftKey==0){const o=$(this).closest(".selectorImageDiv").find(".selectorImage").data("id");window.openImagePreviewModal(o)}});function d(){const i=document.getElementById("imagePickerModal");i&&(i.removeEventListener("touchstart",s),i.removeEventListener("touchmove",s),i.removeEventListener("touchend",s),i.addEventListener("touchstart",s,{passive:!1}),i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",s,{passive:!0}))}function s(i){const o=i.target.closest(".selectorImage");if(o)switch(i.type){case"touchstart":f(i,o);break;case"touchmove":p(i,o);break;case"touchend":k(i,o);break}}const n={longPressTimer:null,longPressTimer2:null,isLongPress:!1,isScrolling:!1,lastTouchPoints:0};function f(i,o){clearTimeout(n.longPressTimer),n.isLongPress=!1,n.isScrolling=!1,n.lastTouchPoints=i.touches.length;const c=$(o).parent();if(i.touches.length===2){i.preventDefault(),console.log("Two-touch detected"),n.longPressTimer=setTimeout(()=>{r&&g(c,i,!0,!0)},400);return}n.startTime=Date.now(),n.startTarget=c[0],n.longPressTimer2=setTimeout(()=>{n.isScrolling||(i.preventDefault(),n.isLongPress=!0,window.openImagePreviewModal(o.dataset.id))},2e3)}function p(i,o){if(i.touches.length===1&&(n.isScrolling=!0,clearTimeout(n.longPressTimer)),n.lastTouchPoints===2&&i.touches.length===2){i.preventDefault();const c=$(o).parent();r&&g(c,i,!0,!0)}}function k(i,o){if(clearTimeout(n.longPressTimer),clearTimeout(n.longPressTimer2),!n.isLongPress&&!n.isScrolling&&n.lastTouchPoints===1){const c=$(o).parent();g(c,i,!0,!1)}n.isLongPress=!1,n.isScrolling=!1,n.lastTouchPoints=0}const u=new MutationObserver(function(i){i.forEach(function(o){document.querySelector("#imagePickerModal")&&d()})});$(document).ready(function(){d(),u.observe(document.body,{childList:!0,subtree:!0})}),$(document).ajaxComplete(function(){document.querySelector("#imagePickerModal")&&d()});function g(i,o,c=!1,h=!1){const w=$("#imagePickerModal").find(".selectorImage").parent();if((c?h:o.shiftKey)&&r){const C=$(r),x=w.index(i),y=w.index(C),D=Math.min(x,y+1),F=Math.max(x,y);w.slice(D,F+1).find(".js-checkbox-trigger").trigger("click")}else i.find(".js-checkbox-trigger").trigger("click"),r=i[0];!c&&o.preventDefault&&o.preventDefault(),a(),l()}$("#imagePickerModal").on("click","#removeImagesFromAlbum",function(i){$("#manageAlbumImagesGrid").find(".image-checkbox-checked").each(function(){$(this).parent().remove()}),a(),l()}),$("#imagePickerModal").on("click","#editImageAlbum",function(i){z(b()),$("#tabEditAlbum").trigger("click"),t(),setTimeout(()=>{a()},200)});function b(){var i=[];return $("#imagePickerContent .image-checkbox-checked .selectorImage").each(function(){var o=$(this).attr("data-id");o&&i.push(o)}),i}$("#imagePickerModal").on("click","#insertAlbum",function(i){var o=m("detectedData"),c=[];$("#manageAlbumImages .selectorImage").each(function(){let T=$(this).attr("data-id");console.log(T),T&&c.push(T)});var{action:h,mediaArray:S,shortcode:w,attributes:E}=o;if(h=="insert")I(c,h);else if(S){var C=$("#imageOrder").val();C=C.length>0?C:c,console.log("DETECTED DATA :"),console.log(o);var x=E;console.log("ATTS"),console.log(x),x.ids=C;var y=R(w,x),D=$(window.editor).val(),F=D.split(w).join(y);$(window.editor).val(F)}$("#imagePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden"),window.currentGalleryDiv=null});var I=function(i,o){const c=`[gallery ids(${i.join(", ")})]`;if(o==="update"&&window.currentGalleryDiv){let h=i.join(",");console.log(h),window.currentGalleryDiv.setAttribute("data-ids",h),$(window.currentGalleryDiv).html(`Gallery, ids: ${h}`),$(window.editor).html()}else insertContent(window.editor,c);$("#imagePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden"),window.currentGalleryDiv=null};$("#imagePickerModal").on("click","#deleteSelectedImages",function(i){var o=[];$("#imageList").find(".image-checkbox-checked").each(function(){o.push($(this).children(".selectorImage").data("id"))}),console.log("DELETED IMAGES: "+o),$.ajax({url:"/admin/image-picker-delete-images",method:"POST",data:{_token:document.querySelector('meta[name="csrf-token"]').content,deleted_images:o},success:function(c){O(),$("#imageList").html(""),L(!0),console.log(c)},error:function(c,h,S){console.error("AJAX hiba:",h,S);let w="Hiba t√∂rt√©nt a k√©pek t√∂rl√©se k√∂zben. Pr√≥b√°ld √∫jra k√©s≈ëbb. T√∂r√∂lend≈ë k√©pek: "+o;c.responseJSON&&c.responseJSON.message&&(w=c.responseJSON.message),alert(w)}})})});function A(e,t=null){$("#manageAlbumImages").empty(),localStorage.getItem("lastEditedPostId"),$("#post_id").data("id");var a=B();v("detectedData",a);const{action:l,mediaArray:r}=a;if(v("imagePickerMode",e),v("imagePickerTargetId",t),["editor","insert","insert-input"].includes(e)==!1)return!1;v("mediaArray",r),window.currentGalleryDiv&&window.currentGalleryDiv.dataset.order;const d=$("#insertAlbum"),s=l==="insert"||r&&r.length===0;d.toggleClass("bg-blue-500 hover:bg-blue-400",!s).toggleClass("bg-gray-500",s).attr("disabled",s).data("action",l).html(d.data(l+"-text")),$("#imagePickerModal").removeClass("hidden"),$("body").addClass("overflow-y-hidden"),$("#editImageAlbum, #tabEditAlbum").toggleClass("hidden",["insert-input"].includes(e)),$("#tabImages").trigger("click"),$("#imageList").html()?(P(m("isCropped")),e=="editor"&&l=="update"?(console.log("tabEditAlbum"),$("#tabEditAlbum").trigger("click"),z(r,l)):$("#tabImages").trigger("click")):(console.log("Refresh Image List"),L(!1).then(()=>{console.log("Az Ajax h√≠v√°s befejez≈ëd√∂tt"),P(m("isCropped")),e=="editor"&&l=="update"?(console.log("tabEditAlbum"),$("#tabEditAlbum").trigger("click"),z(r,l)):$("#tabImages").trigger("click")}).catch(n=>{console.error("Hiba t√∂rt√©nt:",n)}),console.log("Refresh Image List - V√âGE"))}function O(){v("mediaArray",[]),$("#imageList").html(""),localStorage.removeItem("imageListHtml"),localStorage.removeItem("modalImageSize"),localStorage.removeItem("modalImageSizes")}function L(e=!1){return new Promise((t,a)=>{if(typeof $>"u"){a(new Error("jQuery is not available"));return}let l=$("#imageList"),r=localStorage.getItem("imageListHtml"),d=localStorage.getItem("lastEditedPostId"),s=JSON.parse(localStorage.getItem("modalImageSizes")),n=$("#post_id").data("id");if(r&&n==d&&e==!1){console.log("storedImages - bet√∂lt√©se"),v("modalImageSizes",s),l.html(r),console.log("üîπ Bet√∂ltve localStorage-b√≥l!"),$("#loader").hide(),P(m("isCropped")),t();return}console.log("K√©pek bet√∂lt√©se ajax-al."),$.ajax({url:"/admin/image-picker",method:"GET",data:{_token:document.querySelector('meta[name="csrf-token"]').content,post_id:$("#post_id").data("id")},success:function(p){$("#loader").hide(),console.log("AjaxK√©pekBet√∂lt√©se Success Folyamat");let k=$("<div>").html(p.html),u=k.find("#imagePickerContent .selectorImageDiv"),g=u.length,b=0;if(g===0&&e==!1){$("#loader").hide(),t();return}v("modalImageSizes",p.modalImageSizes),localStorage.setItem("modalImageSizes",JSON.stringify(p.modalImageSizes)),u.each(function(){let i=$(this),c=i.find("img").attr("src"),h=new Image;h.src=c,h.onload=function(){I()},h.onerror=function(){console.warn("‚ùå Nem l√©tez≈ë k√©p kihagyva:",c),i.remove(),I()}});function I(){if(b++,console.log("checkedImages_n:"+b),b===g){let i=k.html();localStorage.setItem("imageListHtml",i),localStorage.setItem("lastEditedPostId",n),console.log("üÜï K√©pek friss√≠tve √©s mentve a localStorage-ba!"),l.html(i),f().then(t).catch(a)}}},error:function(p,k,u){console.error("Ajax hiba:",u),a(u)}});function f(){return new Promise((p,k)=>{let u=l.find("#imagePickerContent .selectorImageDiv img"),g=u.length,b=0;if(g===0){$("#totalCount").text("0"),$("#loadedCount").text("0"),$("#loader").hide(),P(m("isCropped")),p();return}$("#totalCount").text(g),u.each(function(){let I=new Image,i=$(this).attr("src");I.src=i,I.onload=function(){b++;let o=Math.round(b/g*100);$("#loadedCount").text(b),$("#progressBar").css("width",o+"%"),b===g&&($("#loader").fadeOut(),P(m("isCropped")),p())},I.onerror=function(){console.warn("‚ùå Egy k√©p nem t√∂lt≈ëd√∂tt be:",i),g--,$("#totalCount").text(g),g===b&&($("#loader").fadeOut(),P(m("isCropped")),p())}})})}})}function G(e){const t={},a=/(\w[\w-]*)\(([^)]*)\)/g;let l;for(;(l=a.exec(e))!==null;){const r=l[1],d=l[2].trim();t[r]=d}return t}function B(){let e=$(window.editor)[0],t=e.selectionStart,a=e.value,l=/\[gallery\b[^\]]*ids\(([\d\s,]+)\)[^\]]*\]/g,r=[],d,s=null,n="insert",f=null;for(;(d=l.exec(a))!==null;)r.push({start:d.index,end:d.index+d[0].length,ids:d[1],shortcode:d[0]});for(let u of r)if(t>=u.start&&t<=u.end){s=u;break}let p=[];var k={};return s&&(console.log("currentGallery:"),console.log(s),f=s.shortcode,k=G(f),p=s.ids.replace(/\s/g,"").split(","),n="update"),{action:n,mediaArray:p,shortcode:f,attributes:k}}function R(e,t){console.log("NEW DATA INPUT:"),console.log(e),console.log(t);const a=/(\w+)=["']([^"']*)["']/g;let l={},r;for(;(r=a.exec(e))!==null;){const s=r[1],n=r[2];l[s]=n}for(const s in t)t.hasOwnProperty(s)&&(l[s]=t[s]);let d="[gallery";for(const s in l)l.hasOwnProperty(s)&&(d+=` ${s}(${l[s]})`);return d+="]",d}function z(e,t="insert"){var a=m("modalImageSizes");if(!a||typeof a!="object"){console.error("HIBA: modalImageSizes nem l√©tezik vagy nem objektum:",a);return}const l=$("#manageAlbumImagesGrid").html();$("#manageAlbumImages").empty();let r=$('<div id="manageAlbumImagesGrid">').addClass("grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4 p-2 sortable-grid");l&&r.append(l),e?(e.forEach(function(s){const n=$('#imagePickerContent .selectorImage[data-id="'+s+'"]').first().closest(".selectorImageDiv");if(n.length){t=="insert"&&n.find(".js-checkbox-trigger").trigger("click");const f=n.clone(!1);Alpine.initTree(f[0]),r.append(f)}}),$("#manageAlbumImages").append(r),$("#imagePickerModal .image-checkbox").blur(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?console.log("Mobil eszk√∂z: a sortable funkci√≥ letiltva."):$(".sortable-grid").sortable({placeholder:"border-2 border-dashed border-gray-300 bg-gray-50 h-24",cursor:"move",update:function(s,n){const f=$(".sortable-grid .selectorImageDiv").map(function(){return $(this).data("image-id")}).get();console.log("NEW ORDER: "+f.join(",")),$("#imageOrder").val(f.join(",")),console.log("√öj sorrend ment√©se:",f)}}).disableSelection()):$("#manageAlbumImages").append("<p>M√©g nincsenek kiv√°lasztott k√©pek")}document.addEventListener("DOMContentLoaded",function(){$("#imagePreviewModal").on("submit","#imageDetailsForm",function(e){H(e),_(m("currentPreviewImageId"))})});window.openImagePreviewModal=function(e,t){v("currentPreviewImageId",e),v("currentPreviewImageSize","medium");var a=m("modalImageSizes")[e];$("#imagePreviewModal").removeClass("hidden").attr("data-media-id",e),_(e),$("#previewImage").attr("src",a.medium??a.original),N(e)};window.closeImagePreviewModal=function(){$("#imagePreviewModal").addClass("hidden")};function _(e){$.ajax({url:`/admin/image-picker/${e}/details`,method:"GET",success:function(t){$('#imageDetailsForm textarea[name="original_url"]').text(t.original_url),$('#imageDetailsForm input[name="title"]').val(t.title),$('#imageDetailsForm input[name="name"]').val(t.name),$('#imageDetailsForm input[name="mime_type"]').val(t.mime_type),$('#imageDetailsForm input[name="file_size"]').val(t.file_size),$('#imageDetailsForm input[name="alt_text"]').val(t.alt_text),$('#imageDetailsForm textarea[name="description"]').val(t.description)},error:function(){alert("Hiba t√∂rt√©nt az adatok bet√∂lt√©se k√∂zben.")}})}function N(e){const t=$("#sizeButtons");t.empty();const a=m("modalImageSizes")[e];$.each(a,function(l,r){const d=l.substring(0,1).toUpperCase()+l.substring(1);t.append(`
            <button
                class="bg-blue-500 text-white px-3 py-1 rounded"
                onclick="updatePreviewImage('${r}', '${l}')"
            >
                ${d}
            </button>
        `)}),$("#previewImageId").text("#("+e+")"),m("imagePickerMode")=="insert-input"?t.append(`
            <button
                id="selectCurrentSizeButton"
                class="bg-green-500 text-white px-4 py-2 rounded"
                onclick="selectCurrentPreviewImage()"
            >
                Kiv√°laszt√°s
            </button>
        `):t.append(`
            <button
                id="insertCurrentSizeButton"
                class="bg-green-500 text-white px-4 py-2 rounded"
                onclick="insertCurrentPreviewImage(false)"
            >Beilleszt√©s</button>

            <button
                id="insertCurrentSizeButton"
                class="bg-green-500 text-white px-4 py-2 rounded"
                onclick="insertCurrentPreviewImage('link')"
            >Beilleszt√©s hivatkoz√°sk√©nt</button>

            <button
                id="insertCurrentSizeButton"
                class="bg-green-500 text-white px-4 py-2 rounded"
                onclick="insertCurrentPreviewImage('viewer')"
            >Beilleszt√©s k√©pn√©z≈ëvel</button>
        `)}window.updatePreviewImage=function(e,t){$("#previewImage").attr("src",e),v("currentPreviewImageSize",t)};window.insertCurrentPreviewImage=function(e){var t=m("currentPreviewImageId"),a=m("currentPreviewImageSize");window.editor&&t&&(e=="link"?insertContent(window.editor,`[image id(${t}) size(${a}) link(@original)]`):e=="viewer"?insertContent(window.editor,`[image id(${t}) size(${a}) link(@original) mode(viewer)]`):insertContent(window.editor,`[image id(${t}) size(${a})]`),closeImagePreviewModal(),$("#imagePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden"))};window.selectCurrentPreviewImage=function(){var e=m("currentPreviewImageId"),t=m("currentPreviewImageSize"),a=m("imagePickerTargetId"),l=`${e}@${t}`;$(a).val(l),closeImagePreviewModal(),$("#imagePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden")};function H(e){e.preventDefault();const t=new FormData(e.target),a=m("currentPreviewImageId");console.log("currentPreviewImageId: "+a),$.ajax({url:`/admin/image-picker/${a}/update`,method:"POST",data:t,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},success:function(l){$("#previewFeedback").removeClass("hidden").text(l.message).addClass("bg-green-100 text-green-700"),setTimeout(()=>{$("#previewFeedback").addClass("hidden")},2e3)},error:function(l){$("#previewFeedback").removeClass("hidden").text(l.responseJSON.message||"Hiba t√∂rt√©nt a ment√©s sor√°n.").addClass("bg-red-100 text-red-700"),setTimeout(()=>{$("#previewFeedback").addClass("hidden")},4e3)}})}function J(e){$("#filePickerModal").removeClass("hidden"),$("body").addClass("overflow-y-hidden"),refreshFileList()}window.refreshFileList=function(){$.ajax({url:"/admin/file-picker",method:"GET",data:{_token:document.querySelector('meta[name="csrf-token"]').content,post_id:$("#post_id").data("id")},success:function(e){$("#fileList").html(e.html)},error:function(e,t,a){console.error("Ajax hiba:",a),reject(a)}})};document.addEventListener("DOMContentLoaded",function(){$("#closeFilePickerModal").on("click",function(){$("#filePickerModal").addClass("hidden"),$("body").removeClass("overflow-y-hidden")}),$("#filePickerModal").on("click","#selectAllFile",function(){var e=$(this).closest("table"),t=e.find(".file-checkbox"),a=t.length===t.filter(":checked").length;t.prop("checked",!a)}),$("#filePickerModal").on("click","#deleteSelectedfiles",function(){$("#confirmModal").removeClass("hidden").data("caller","deleteFiles"),$("#confirmModalTitle").html("<p>M≈±velet meger≈ës√≠t√©se</p>"),$("#confirmModalContent").html("<p>Biztosan t√∂rl√∂d a kijel√∂lt f√°jlokat?</p>")}),$("#filePickerModal").on("click","#selectAllFile, .file-checkbox",function(){$("#deleteSelectedfiles").prop("disabled",$("#postFilesListTable").find(".file-checkbox:checked").length==0)}),$("#confirmModal .confirm-button").on("click",function(){if($("#confirmModal").data("caller")=="deleteFiles"){var e=$("#postFilesListTable").find(".file-checkbox:checked");if(e){var t=[];$(e).each(function(){t.push($(this).closest("tr").data("id"))}),$.ajax({url:"/admin/file-picker-delete-files",method:"POST",data:{_token:document.querySelector('meta[name="csrf-token"]').content,post_id:$("#post_id").data("id"),deleted_files:t},success:function(a){refreshFileList()},error:function(a,l,r){console.error("Ajax xhr:"+a+" status: "+l+" hiba:",r),reject(r)}})}$("#confirmModal").addClass("hidden")}})});document.addEventListener("DOMContentLoaded",function(){v("currentPreviewFileId",0),$("#filePickerModal").on("click",".selectorCol",function(e){console.log("click:selectorCol");var t=$(this).closest("tr").data("id");v("currentPreviewFileId",t),console.log("openFilePreviewModal, id: "+t),j(t),openFilePreviewModal(t)}),$("#filePreviewModal").on("click","#tabFileDetails",function(e){var t=m("currentPreviewFileId");console.log("loadFileDetails, id: "+t)}),$("#filePreviewModal").on("submit","#fileDetailsForm",function(e){K(e),refreshFileList()}),$("#filePreviewModal").on("click","#copyFileUrlToClipboard",function(e){var t=$("#previewFileUrl").val();U(t),$("#filePickerModal").addClass("hidden"),$("#filePreviewModal").addClass("hidden")}),$("#filePreviewModal").on("click","#insertFileUrlToEditor",function(e){var t=$("#previewFileUrl").val();$("#filePickerModal").addClass("hidden"),$("#filePreviewModal").addClass("hidden"),insertFileData(t)}),$("#filePreviewModal").on("click","#insertFilSHToEditor",function(e){var t=m("currentPreviewFileId");$("#previewFileUrl").val();var a="[file id("+t+")";a+=" title(@title@ext)",$("#inserFileSCDL").is(":checked")&&(a+=" dl-link"),$("#inserFileSCOpen").is(":checked")&&(a+=" open-link"),a+=" ]",$("#filePickerModal").addClass("hidden"),$("#filePreviewModal").addClass("hidden"),insertFileData(a)})});window.insertFileData=function(e){insertContent(window.editor,e)};window.openFilePreviewModal=function(e){$("#filePreviewModal").removeClass("hidden").attr("data-file-id",e)};window.closeFilePreviewModal=function(){$("#filePreviewModal").addClass("hidden")};function j(e){$.ajax({url:`/admin/file-picker/${e}/details`,method:"GET",success:function(t){$("#previewFileUrl").val(t.url),$("#previewFileTitle").val(t.title),$("#previewFileName").val(t.name),$("#previewFileMimeType").val(t.mime_type),$("#previewFileFileExtension").val(t.file_file_extension),$("#previewFileFileName").val(t.file_file_name+"."+t.file_file_extension),$("#previewFileSize").val(t.file_size),$("#previewFileAltText").html(t.alt_text),$("#previewFileDescription").html(t.description),$('#fileDetailsForm input[name="title"]').val(t.title),$('#fileDetailsForm input[name="name"]').val(t.name),$('#fileDetailsForm input[name="mime_type"]').val(t.mime_type),$('#fileDetailsForm input[name="file_size"]').val(t.file_size),$('#fileDetailsForm input[name="alt_text"]').val(t.alt_text),$('#fileDetailsForm textarea[name="description"]').val(t.description)},error:function(){alert("Hiba t√∂rt√©nt az adatok bet√∂lt√©se k√∂zben.")}})}function K(e){e.preventDefault();const t=new FormData(e.target),a=m("currentPreviewFileId");console.log("currentFileId: "+a),$.ajax({url:`/admin/file-picker/${a}/update`,method:"POST",data:t,processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},success:function(l){$("#previewFileFeedback").removeClass("hidden").text(l.message).addClass("bg-green-100 text-green-700"),j(a)},error:function(l){$("#previewFileFeedback").removeClass("hidden").text(l.responseJSON.message||"Hiba t√∂rt√©nt a ment√©s sor√°n.").addClass("bg-red-100 text-red-700")}})}function U(e){const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999);try{navigator.clipboard?navigator.clipboard.writeText(e).then(()=>alert("M√°solva a v√°g√≥lapra!")).catch(a=>{console.error("Clipboard API hiba:",a),document.execCommand("copy"),alert("M√°solva (fallback m√≥dszer)!")}):(document.execCommand("copy"),alert("URL m√°solva a v√°g√≥lapra."))}catch(a){console.error("M√°sol√°si hiba:",a),alert("M√°sol√°s sikertelen!")}finally{document.body.removeChild(t)}}document.querySelector("#edit-album-tabs");let M={isCropped:!1,currentPreviewImageId:null,currentPreviewFileId:null,currentPreviewImageSize:"thumbnail",modalImageSizes:{},mediaArray:[],detectedData:{},imagePickerMode:null,imagePickerTargetId:null};function v(e,t){M.hasOwnProperty(e)?M[e]=t:console.error(`A(z) ${e} v√°ltoz√≥ nem l√©tezik.`)}function m(e){if(M.hasOwnProperty(e))return M[e];console.error(`A(z) ${e} v√°ltoz√≥ nem l√©tezik.`)}document.addEventListener("alpine:initialized",()=>{document.addEventListener("DOMContentLoaded",function(){var e=Cookies.get("croppedEffect");e===void 0&&(e="true",Cookies.set("croppedEffect",e,{expires:7})),e=e==="true",$("#cropToggle").prop("checked",e),P(e),v("isCropped",e),$("#imagePickerModal").on("change","#cropToggle",function(){const t=$(this).is(":checked");e=t,Cookies.set("croppedEffect",t,{expires:7}),v("isCropped",e),P(t)})})});export{J as a,A as o,O as r};
